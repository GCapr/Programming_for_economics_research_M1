<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Module 8: Replicability | ProTools ER1</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=Fira+Code:wght@400;500&family=Source+Sans+Pro:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .protected-content {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
  </style>
</head>
<body>
  <!-- Password Protection Overlay -->
    <div id="password-overlay" class="password-overlay">
    <div class="password-modal">
      <h2>ProTools ER1</h2>
      <p>Programming Tools for Empirical Research</p>

      <div class="course-description">
        <h3>Course Modules</h3>
        <ul class="module-list">
          <li><strong>Module 0:</strong> Languages & Platforms ‚Äî Python, Stata, R setup; IDEs (RStudio, VS Code, Jupyter)</li>
          <li><strong>Module 1:</strong> Getting Started ‚Äî Installation, basic syntax, packages</li>
          <li><strong>Module 2:</strong> Data Harnessing ‚Äî File import, APIs, web scraping</li>
          <li><strong>Module 3:</strong> Data Exploration ‚Äî Inspection, summary statistics, visualization</li>
          <li><strong>Module 4:</strong> Data Cleaning ‚Äî Data quality, transformation, validation</li>
          <li><strong>Module 5:</strong> Data Analysis ‚Äî Statistical analysis, simulation, experimental design</li>
          <li><strong>Module 6:</strong> Causal Inference ‚Äî Matching, DiD, RDD, IV, Synthetic Control</li>
          <li><strong>Module 7:</strong> Estimation Methods ‚Äî Standard errors, panel data, MLE/GMM</li>
          <li><strong>Module 8:</strong> Replicability ‚Äî Project organization, documentation, replication packages</li>
          <li><strong>Module 9:</strong> Git & GitHub ‚Äî Version control, collaboration, branching</li>
          <li><strong>Module 10:</strong> History of NLP ‚Äî From ELIZA to Transformers</li>
          <li><strong>Module 11:</strong> Machine Learning ‚Äî Prediction, regularization, neural networks</li>
          <li><strong>Module 12:</strong> Large Language Models ‚Äî How LLMs work, prompting, APIs</li>
        </ul>
      </div>

      <div class="access-note">
        This course is currently open to <strong>students at Sciences Po</strong>. If you are not a Sciences Po student but would like access, please <a href="mailto:giulia.caprini@sciencespo.fr">email me</a> to request an invite token.
      </div>

      <div class="password-form">
        <input type="password" id="password-input" placeholder="Enter password" autocomplete="off">
        <button id="password-submit">Access Course</button>
        <p id="password-error" style="color: #e53e3e; font-size: 0.85rem; margin-top: 1rem; display: none;">Incorrect password. Please try again.</p>
      </div>
    </div>
  </div>

  <div class="page-wrapper protected-content">
    <aside class="sidebar">
      <a href="../index.html" class="sidebar-logo">ProTools ER1</a>
      <span class="sidebar-subtitle">Programming Tools for Empirical Research</span>
      <nav>
        <ul>
          <li><a href="../index.html"><span class="welcome-icon">üè†</span> Welcome</a></li>
          <li class="has-subnav">
            <a href="00-languages-platforms.html"><span class="module-number">0</span> Languages & Platforms</a>
            <ul class="sub-nav">
              <li><a href="00a-rstudio-guide.html">RStudio Guide</a></li>
              <li><a href="00b-stata-guide.html">Stata Guide</a></li>
              <li><a href="00c-vscode-guide.html">VS Code Guide</a></li>
              <li><a href="00d-notebooks-guide.html">Notebooks Guide</a></li>
            </ul>
          </li>
          <li><a href="01-getting-started.html"><span class="module-number">1</span> Getting Started</a></li>
          <li class="has-subnav">
            <a href="02-data-harnessing.html"><span class="module-number">2</span> Data Harnessing</a>
            <ul class="sub-nav">
              <li><a href="02a-file-import.html">File Import</a></li>
              <li><a href="02b-apis.html">APIs</a></li>
              <li><a href="02c-web-scraping.html">Web Scraping</a></li>
            </ul>
          </li>
          <li><a href="03-data-exploration.html"><span class="module-number">3</span> Data Exploration</a></li>
          <li><a href="04-data-cleaning.html"><span class="module-number">4</span> Data Cleaning</a></li>
          <li class="has-subnav">
            <a href="05-data-analysis.html"><span class="module-number">5</span> Data Analysis</a>
            <ul class="sub-nav">
              <li><a href="05a-data-simulation.html">Data Simulation</a></li>
            </ul>
          </li>
          <li class="has-subnav">
            <a href="06-causal-inference.html"><span class="module-number">6</span> Causal Inference</a>
            <ul class="sub-nav">
              <li><a href="06a-matching.html">Matching</a></li>
              <li><a href="06b-did.html">Difference-in-Differences</a></li>
              <li><a href="06c-rdd.html">Regression Discontinuity</a></li>
              <li><a href="06d-iv.html">Instrumental Variables</a></li>
              <li><a href="06e-synthetic-control.html">Synthetic Control</a></li>
              <li><a href="05b-experiments.html">Experiments</a></li>
            </ul>
          </li>
          <li><a href="07-estimation.html"><span class="module-number">7</span> Estimation Methods</a></li>
          <li class="active"><a href="08-replicability.html"><span class="module-number">8</span> Replicability</a></li>
          <li><a href="09-github.html"><span class="module-number">9</span> Git & GitHub</a></li>
          <li><a href="10-nlp-history.html"><span class="module-number">10</span> History of NLP</a></li>
          <li><a href="11-machine-learning.html"><span class="module-number">11</span> Machine Learning</a></li>
          <li><a href="12-llms.html"><span class="module-number">12</span> Large Language Models</a></li>
          <li><a href="../resources.html">Resources</a></li>
          <li><a href="contact.html">Contact & Feedback</a></li>
        </ul>
      </nav>
    </aside>

    <main class="main-content">
      <div class="content">
        <div class="module-header">
          <h1>8 &nbsp;Replicability & Reproducibility</h1>
          <div class="module-meta">
            <span>~6 hours</span>
            <span>Research Best Practices</span>
            <span>Intermediate</span>
          </div>
        </div>

        <div class="learning-objectives">
          <h3>Learning Objectives</h3>
          <ul>
            <li>Understand the difference between replicability and reproducibility</li>
            <li>Organize research projects with clear folder structures</li>
            <li>Write documentation that enables others to run your code</li>
            <li>Create publication-ready replication packages</li>
            <li>Successfully replicate published economics papers</li>
          </ul>
        </div>

        <h2>8.1 Definitions</h2>

        <table>
          <thead><tr><th>Concept</th><th>Definition</th><th>Question</th></tr></thead>
          <tbody>
            <tr><td><strong>Reproducibility</strong></td><td>Same data + same code = same results</td><td>Can I re-run this and get identical output?</td></tr>
            <tr><td><strong>Replicability</strong></td><td>New data + same methods = consistent findings</td><td>Does this hold in a different sample?</td></tr>
          </tbody>
        </table>

        <div class="tip-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem 1.25rem; margin: 1.5rem 0;">
          <strong>Why This Matters:</strong> Major economics journals (AER, QJE, Econometrica) now require replication packages. A 2019 study found that only 37% of published papers could be successfully reproduced. Good practices from day one save enormous time later and increase your credibility as a researcher.
        </div>

        <h2>8.2 Project Organization</h2>

        <p>A well-organized project folder is the foundation of reproducible research. Here's what a complete research project should look like:</p>

        <!-- Visual Project Folder Structure -->
        <div style="background: linear-gradient(135deg, #1e1e2e 0%, #2d2d3d 100%); border-radius: 12px; padding: 2rem; margin: 2rem 0; font-family: 'Fira Code', monospace; color: #e0e0e0; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
          <div style="display: flex; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #444;">
            <span style="font-size: 1.5rem; margin-right: 0.75rem;">üìÅ</span>
            <span style="font-weight: 600; font-size: 1.1rem; color: #64b5f6;">minimum-wage-study/</span>
          </div>

          <div style="line-height: 1.8; font-size: 0.9rem;">
            <div style="display: flex; align-items: flex-start;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #81c784;">üìÑ README.md</span>
              <span style="color: #888; margin-left: 1rem; font-size: 0.8rem;">‚Üê Start here! Instructions for everything</span>
            </div>
            <div style="display: flex; align-items: flex-start;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #81c784;">üìÑ LICENSE</span>
              <span style="color: #888; margin-left: 1rem; font-size: 0.8rem;">‚Üê How others can use your code</span>
            </div>
            <div style="display: flex; align-items: flex-start;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #64b5f6;">üìÅ data/</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #ffb74d;">üìÅ raw/</span>
              <span style="color: #e57373; margin-left: 1rem; font-size: 0.8rem;">‚Üê NEVER modify these files!</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 3rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #aaa;">cps_2019.dta</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 3rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îî‚îÄ‚îÄ</span>
              <span style="color: #aaa;">state_minimum_wages.csv</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #ffb74d;">üìÅ processed/</span>
              <span style="color: #888; margin-left: 1rem; font-size: 0.8rem;">‚Üê Generated by code</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îî‚îÄ‚îÄ</span>
              <span style="color: #81c784;">üìÑ data_dictionary.md</span>
              <span style="color: #888; margin-left: 1rem; font-size: 0.8rem;">‚Üê Variable definitions</span>
            </div>
            <div style="display: flex; align-items: flex-start;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #64b5f6;">üìÅ code/</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #f48fb1; font-weight: 600;">00_master.do</span>
              <span style="color: #4caf50; margin-left: 1rem; font-size: 0.8rem;">‚Üê Run THIS to reproduce everything</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #aaa;">01_import_clean.do</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #aaa;">02_merge_construct.do</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #aaa;">03_descriptive_stats.do</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #aaa;">04_main_analysis.do</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îî‚îÄ‚îÄ</span>
              <span style="color: #aaa;">05_robustness.do</span>
            </div>
            <div style="display: flex; align-items: flex-start;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #64b5f6;">üìÅ output/</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #ffb74d;">üìÅ tables/</span>
              <span style="color: #888; margin-left: 1rem; font-size: 0.8rem;">‚Üê .tex files for LaTeX</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #ffb74d;">üìÅ figures/</span>
              <span style="color: #888; margin-left: 1rem; font-size: 0.8rem;">‚Üê .pdf or .png graphs</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îî‚îÄ‚îÄ</span>
              <span style="color: #ffb74d;">üìÅ logs/</span>
              <span style="color: #888; margin-left: 1rem; font-size: 0.8rem;">‚Üê Stata log files</span>
            </div>
            <div style="display: flex; align-items: flex-start;">
              <span style="color: #666; margin-right: 0.5rem;">‚îî‚îÄ‚îÄ</span>
              <span style="color: #64b5f6;">üìÅ paper/</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #ce93d8;">main.tex</span>
              <span style="color: #888; margin-left: 1rem; font-size: 0.8rem;">‚Üê Master LaTeX file</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îú‚îÄ‚îÄ</span>
              <span style="color: #aaa;">sections/</span>
            </div>
            <div style="display: flex; align-items: flex-start; padding-left: 1.5rem;">
              <span style="color: #666; margin-right: 0.5rem;">‚îî‚îÄ‚îÄ</span>
              <span style="color: #aaa;">bibliography.bib</span>
            </div>
          </div>
        </div>

        <h3>Key Principles</h3>
        <ul>
          <li><strong>Raw data is sacred:</strong> Never modify original files‚Äîall cleaning happens in code</li>
          <li><strong>One master script:</strong> Runs entire analysis end-to-end with a single click</li>
          <li><strong>Relative paths only:</strong> Never use absolute paths like <code>C:\Users\...</code></li>
          <li><strong>Number your scripts:</strong> Makes execution order obvious (00, 01, 02...)</li>
          <li><strong>Version everything:</strong> Use Git (see <a href="09-github.html">Module 9</a>)</li>
          <li><strong>Separate outputs:</strong> Tables, figures, and logs in their own folders</li>
        </ul>

        <h2>8.3 Understanding File Paths</h2>

        <p>File paths tell your computer where to find files. Understanding them is essential for writing code that works on any machine.</p>

        <h3>Absolute vs. Relative Paths</h3>

        <table>
          <thead><tr><th>Type</th><th>Example</th><th>Verdict</th></tr></thead>
          <tbody>
            <tr>
              <td><strong>Absolute Path</strong></td>
              <td><code>C:\Users\Maria\Projects\thesis\data\raw\survey.dta</code></td>
              <td style="color: #e53e3e;">‚ùå Never use in code</td>
            </tr>
            <tr>
              <td><strong>Relative Path</strong></td>
              <td><code>data/raw/survey.dta</code></td>
              <td style="color: #38a169;">‚úì Always use this</td>
            </tr>
          </tbody>
        </table>

        <p>A <strong>relative path</strong> starts from your current location (the "working directory"). Think of it like giving directions: "go to the data folder, then the raw subfolder, then find survey.dta."</p>

        <h3>Path Syntax: Mac/Linux vs. Windows</h3>

        <div class="code-tabs">
          <div class="tab-buttons">
            <button class="tab-button active" data-lang="mac">Mac / Linux</button>
            <button class="tab-button" data-lang="windows">Windows</button>
          </div>
          <div class="tab-content active" data-lang="mac">
            <pre><code class="language-bash"># Mac/Linux use forward slashes /
/Users/giulia/Projects/thesis/          # Absolute path
data/raw/survey.csv                      # Relative path

# Navigate up one folder with ..
../other_project/data.csv               # Go up, then into other_project

# Home directory shortcut
~/Projects/thesis/                       # ~ means your home folder</code></pre>
          </div>
          <div class="tab-content" data-lang="windows">
            <pre><code class="language-bash"># Windows traditionally uses backslashes \
C:\Users\Giulia\Projects\thesis\        # Absolute path
data\raw\survey.csv                      # Relative path

# But forward slashes work in most modern software!
data/raw/survey.csv                      # This works in Stata, Python, R

# Navigate up one folder with ..
..\other_project\data.csv               # Go up, then into other_project</code></pre>
          </div>
        </div>

        <div class="tip-box" style="background: #e8f5e9; border-left: 4px solid #4caf50; padding: 1rem 1.25rem; margin: 1.5rem 0;">
          <strong>Pro Tip:</strong> Use forward slashes (<code>/</code>) everywhere, even on Windows. Stata, Python, and R all understand them, making your code cross-platform compatible.
        </div>

        <h3>Setting the Working Directory</h3>

        <p>The working directory is your "home base"‚Äîall relative paths start from here. Set it once at the beginning of your master script.</p>

        <div class="code-tabs">
          <div class="tab-buttons">
            <button class="tab-button active" data-lang="stata">Stata</button>
            <button class="tab-button" data-lang="r">R</button>
            <button class="tab-button" data-lang="python">Python</button>
          </div>
          <div class="tab-content active" data-lang="stata">
            <pre><code class="language-stata">* Check current working directory
pwd

* Set working directory (do this ONCE in master script)
cd "/Users/giulia/Projects/minimum-wage-study"

* Now all paths are relative to this location
use "data/raw/cps_2019.dta", clear
export delimited "data/processed/clean_data.csv"</code></pre>
          </div>
          <div class="tab-content" data-lang="r">
            <pre><code class="language-r"># Check current working directory
getwd()

# Set working directory
setwd("/Users/giulia/Projects/minimum-wage-study")

# Better: use here package (finds project root automatically)
library(here)
data <- read_csv(here("data", "raw", "cps_2019.csv"))

# Or use RStudio Projects (.Rproj files)</code></pre>
          </div>
          <div class="tab-content" data-lang="python">
            <pre><code class="language-python">import os
from pathlib import Path

# Check current working directory
print(os.getcwd())

# Set working directory
os.chdir("/Users/giulia/Projects/minimum-wage-study")

# Better: use pathlib for cross-platform paths
project_root = Path(__file__).parent.parent  # Go up from code/ folder
data_path = project_root / "data" / "raw" / "cps_2019.csv"</code></pre>
          </div>
        </div>

        <h2>8.4 The Master Script</h2>

        <p>The master script is the single entry point that reproduces your entire analysis. A reviewer or co-author should be able to run this one file and regenerate all results.</p>

        <div class="tip-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem 1.25rem; margin: 1.5rem 0;">
          <strong>What to look for in the code below:</strong>
          <ul style="margin: 0.5rem 0 0 0; padding-left: 1.25rem;">
            <li>Clear header with project info and instructions</li>
            <li>One location to set the root path (the only absolute path in the entire project)</li>
            <li>Global macros for all folder paths</li>
            <li>Sequential execution of all sub-scripts</li>
            <li>Timestamps and logging</li>
          </ul>
        </div>

        <div class="code-tabs">
          <div class="tab-buttons">
            <button class="tab-button active" data-lang="stata">Stata</button>
            <button class="tab-button" data-lang="r">R</button>
            <button class="tab-button" data-lang="python">Python</button>
          </div>
          <div class="tab-content active" data-lang="stata">
            <pre><code class="language-stata">/*==============================================================================
                    MASTER DO-FILE: Minimum Wage and Employment

    Paper:      "The Employment Effects of Minimum Wage Increases"
    Authors:    Smith, J. and Jones, M.
    Version:    1.0
    Date:       January 2025

    INSTRUCTIONS:
    1. Set the root path below to your project folder location
    2. Ensure all required packages are installed (see below)
    3. Run this entire file to reproduce all results

    REQUIRED PACKAGES: estout, reghdfe, ftools, coefplot
    Install with: ssc install estout, replace
================================================================================*/

clear all
set more off
cap log close

*------------------------------------------------------------------------------*
*  SET ROOT PATH - MODIFY THIS LINE ONLY
*------------------------------------------------------------------------------*
* Users should change this path to their own project folder location
if "`c(username)'" == "giulia" {
    global root "/Users/giulia/Projects/minimum-wage-study"
}
else if "`c(username)'" == "john" {
    global root "C:/Users/john/Research/minimum-wage-study"
}
else {
    * Default: assume current directory is project root
    global root "`c(pwd)'"
}

*------------------------------------------------------------------------------*
*  DEFINE FOLDER PATHS (do not modify)
*------------------------------------------------------------------------------*
global data     "$root/data"
global raw      "$data/raw"
global processed "$data/processed"
global code     "$root/code"
global output   "$root/output"
global tables   "$output/tables"
global figures  "$output/figures"
global logs     "$output/logs"

*------------------------------------------------------------------------------*
*  CREATE FOLDERS IF THEY DON'T EXIST
*------------------------------------------------------------------------------*
cap mkdir "$processed"
cap mkdir "$output"
cap mkdir "$tables"
cap mkdir "$figures"
cap mkdir "$logs"

*------------------------------------------------------------------------------*
*  START LOG FILE
*------------------------------------------------------------------------------*
local datetime: di %tcCCYY-NN-DD-HH-MM-SS Clock("`c(current_date)' `c(current_time)'","DMYhms")
log using "$logs/master_log_`datetime'.txt", text replace

di "=============================================="
di "  MASTER SCRIPT STARTED"
di "  Date/Time: `c(current_date)' `c(current_time)'"
di "  Stata version: `c(stata_version)'"
di "  Root directory: $root"
di "=============================================="

*------------------------------------------------------------------------------*
*  RUN ANALYSIS SCRIPTS IN ORDER
*------------------------------------------------------------------------------*
di _n ">>> Running 01_import_clean.do..."
do "$code/01_import_clean.do"

di _n ">>> Running 02_merge_construct.do..."
do "$code/02_merge_construct.do"

di _n ">>> Running 03_descriptive_stats.do..."
do "$code/03_descriptive_stats.do"

di _n ">>> Running 04_main_analysis.do..."
do "$code/04_main_analysis.do"

di _n ">>> Running 05_robustness.do..."
do "$code/05_robustness.do"

*------------------------------------------------------------------------------*
*  COMPLETION
*------------------------------------------------------------------------------*
di _n "=============================================="
di "  MASTER SCRIPT COMPLETED SUCCESSFULLY"
di "  End time: `c(current_date)' `c(current_time)'"
di "  All outputs saved to: $output"
di "=============================================="

log close</code></pre>
          </div>
          <div class="tab-content" data-lang="r">
            <pre><code class="language-r">#===============================================================================
#                   MASTER SCRIPT: Minimum Wage and Employment
#
#   Paper:      "The Employment Effects of Minimum Wage Increases"
#   Authors:    Smith, J. and Jones, M.
#   Version:    1.0
#   Date:       January 2025
#
#   INSTRUCTIONS:
#   1. Open the .Rproj file in RStudio (sets working directory automatically)
#   2. Run this entire script to reproduce all results
#
#   REQUIRED PACKAGES: tidyverse, fixest, modelsummary, here
#===============================================================================

# Clear environment
rm(list = ls())

# Load packages (install if needed)
required_packages <- c("tidyverse", "fixest", "modelsummary", "here", "haven")
new_packages <- required_packages[!(required_packages %in% installed.packages()[,"Package"])]
if(length(new_packages)) install.packages(new_packages)

library(tidyverse)
library(fixest)
library(modelsummary)
library(here)
library(haven)

#------------------------------------------------------------------------------
#  DEFINE PATHS (using here package - no manual path setting needed!)
#------------------------------------------------------------------------------
paths <- list(
  raw       = here("data", "raw"),
  processed = here("data", "processed"),
  tables    = here("output", "tables"),
  figures   = here("output", "figures"),
  logs      = here("output", "logs")
)

# Create directories if they don't exist
walk(paths, ~dir.create(.x, recursive = TRUE, showWarnings = FALSE))

#------------------------------------------------------------------------------
#  START LOG
#------------------------------------------------------------------------------
sink(file.path(paths$logs, paste0("master_log_", Sys.Date(), ".txt")))
cat("==============================================\n")
cat("  MASTER SCRIPT STARTED\n")
cat("  Date/Time:", format(Sys.time()), "\n")
cat("  R version:", R.version.string, "\n")
cat("  Project root:", here(), "\n")
cat("==============================================\n\n")

#------------------------------------------------------------------------------
#  RUN ANALYSIS SCRIPTS IN ORDER
#------------------------------------------------------------------------------
cat("\n>>> Running 01_import_clean.R...\n")
source(here("code", "01_import_clean.R"))

cat("\n>>> Running 02_merge_construct.R...\n")
source(here("code", "02_merge_construct.R"))

cat("\n>>> Running 03_descriptive_stats.R...\n")
source(here("code", "03_descriptive_stats.R"))

cat("\n>>> Running 04_main_analysis.R...\n")
source(here("code", "04_main_analysis.R"))

cat("\n>>> Running 05_robustness.R...\n")
source(here("code", "05_robustness.R"))

#------------------------------------------------------------------------------
#  COMPLETION
#------------------------------------------------------------------------------
cat("\n==============================================\n")
cat("  MASTER SCRIPT COMPLETED SUCCESSFULLY\n")
cat("  End time:", format(Sys.time()), "\n")
cat("  All outputs saved to:", here("output"), "\n")
cat("==============================================\n")
sink()</code></pre>
          </div>
          <div class="tab-content" data-lang="python">
            <pre><code class="language-python">"""
================================================================================
                    MASTER SCRIPT: Minimum Wage and Employment

    Paper:      "The Employment Effects of Minimum Wage Increases"
    Authors:    Smith, J. and Jones, M.
    Version:    1.0
    Date:       January 2025

    INSTRUCTIONS:
    1. Navigate to project folder in terminal
    2. Run: python code/00_master.py

    REQUIRED PACKAGES: pandas, numpy, statsmodels, matplotlib, linearmodels
    Install with: pip install -r requirements.txt
================================================================================
"""

import os
import sys
from pathlib import Path
from datetime import datetime
import subprocess

#------------------------------------------------------------------------------
#  DEFINE PATHS
#------------------------------------------------------------------------------
# Get project root (parent of code folder)
ROOT = Path(__file__).resolve().parent.parent

PATHS = {
    'raw': ROOT / 'data' / 'raw',
    'processed': ROOT / 'data' / 'processed',
    'tables': ROOT / 'output' / 'tables',
    'figures': ROOT / 'output' / 'figures',
    'logs': ROOT / 'output' / 'logs',
    'code': ROOT / 'code'
}

# Create directories if they don't exist
for path in PATHS.values():
    path.mkdir(parents=True, exist_ok=True)

#------------------------------------------------------------------------------
#  LOGGING SETUP
#------------------------------------------------------------------------------
log_file = PATHS['logs'] / f"master_log_{datetime.now().strftime('%Y-%m-%d_%H-%M-%S')}.txt"

class Logger:
    def __init__(self, filename):
        self.terminal = sys.stdout
        self.log = open(filename, 'w')

    def write(self, message):
        self.terminal.write(message)
        self.log.write(message)

    def flush(self):
        self.terminal.flush()
        self.log.flush()

sys.stdout = Logger(log_file)

#------------------------------------------------------------------------------
#  START
#------------------------------------------------------------------------------
print("=" * 50)
print("  MASTER SCRIPT STARTED")
print(f"  Date/Time: {datetime.now()}")
print(f"  Python version: {sys.version}")
print(f"  Project root: {ROOT}")
print("=" * 50)

#------------------------------------------------------------------------------
#  RUN ANALYSIS SCRIPTS IN ORDER
#------------------------------------------------------------------------------
scripts = [
    '01_import_clean.py',
    '02_merge_construct.py',
    '03_descriptive_stats.py',
    '04_main_analysis.py',
    '05_robustness.py'
]

for script in scripts:
    print(f"\n>>> Running {script}...")
    script_path = PATHS['code'] / script
    exec(open(script_path).read())

#------------------------------------------------------------------------------
#  COMPLETION
#------------------------------------------------------------------------------
print("\n" + "=" * 50)
print("  MASTER SCRIPT COMPLETED SUCCESSFULLY")
print(f"  End time: {datetime.now()}")
print(f"  All outputs saved to: {ROOT / 'output'}")
print("=" * 50)</code></pre>
          </div>
        </div>

        <h2>8.5 Documentation: The README</h2>

        <p>Every project needs a README answering: What is this? What data? What software? How to run?</p>

        <div class="tip-box" style="background: #e3f2fd; border-left: 4px solid #2196f3; padding: 1rem 1.25rem; margin: 1.5rem 0;">
          <strong>README Template:</strong>
          <pre style="background: #f5f5f5; padding: 1rem; border-radius: 4px; margin-top: 0.75rem; font-size: 0.85rem; overflow-x: auto;"><code># Project Title

## Overview
Brief description of the research question and findings.

## Data
- **Source**: Where data comes from (e.g., "CPS via IPUMS")
- **Access**: How to obtain it (include URLs or instructions)
- **Files**: List of data files and what they contain

## Software Requirements
- Stata 17 or later
- Required packages: estout, reghdfe, ftools

## Instructions
1. Clone or download this repository
2. Open `code/00_master.do`
3. Set the root path on line 25 to your project folder
4. Run the master file

## File Structure
[Include folder tree here]

## Output
Running the master script will generate:
- Tables 1-5 in `output/tables/`
- Figures 1-3 in `output/figures/`

## Contact
Your Name (email@university.edu)</code></pre>
        </div>

        <h2>8.6 Automated LaTeX Tables</h2>

        <p>Never copy-paste results into tables manually. Export publication-ready LaTeX tables directly from your statistical software.</p>

        <div class="tip-box" style="background: #ffebee; border-left: 4px solid #e53e3e; padding: 1rem 1.25rem; margin: 1.5rem 0;">
          <strong>‚ùå The Wrong Way (Copy-Paste):</strong>
          <ol style="margin: 0.5rem 0 0 0; padding-left: 1.25rem;">
            <li>Run regression in Stata</li>
            <li>Copy numbers from output window</li>
            <li>Paste into Excel</li>
            <li>Format in Excel</li>
            <li>Copy to Word or manually type into LaTeX</li>
          </ol>
          <p style="margin-top: 0.75rem; color: #666;"><em>Problems: Error-prone, time-consuming, not reproducible, nightmare when results change</em></p>
        </div>

        <div class="tip-box" style="background: #e8f5e9; border-left: 4px solid #4caf50; padding: 1rem 1.25rem; margin: 1.5rem 0;">
          <strong>‚úì The Right Way (Automated Export):</strong>
          <ol style="margin: 0.5rem 0 0 0; padding-left: 1.25rem;">
            <li>Run regression in Stata</li>
            <li>Export to .tex file with one command</li>
            <li>LaTeX imports table automatically</li>
            <li>Results change? Just re-run the code!</li>
          </ol>
        </div>

        <h3>Stata: esttab / estout</h3>

        <p>The <code>estout</code> package is the gold standard for exporting Stata results to LaTeX.</p>

        <pre><code class="language-stata">* Install the package (once)
ssc install estout, replace

* Run your regressions and store estimates
reg earnings education age, robust
estimates store m1

reg earnings education age experience, robust
estimates store m2

reg earnings education age experience i.industry, robust
estimates store m3

* Export to LaTeX
esttab m1 m2 m3 using "$tables/main_results.tex", ///
    replace                                        ///
    label                                          /// Use variable labels
    b(3) se(3)                                     /// 3 decimal places
    star(* 0.10 ** 0.05 *** 0.01)                 /// Significance stars
    title("Effect of Education on Earnings")       ///
    mtitles("Basic" "Controls" "Industry FE")      /// Column titles
    scalars("r2 R-squared" "N Observations")       ///
    nonotes                                        ///
    addnotes("Standard errors in parentheses."    ///
             "* p<0.10, ** p<0.05, *** p<0.01")</code></pre>

        <p>This produces a complete LaTeX table that looks like:</p>

        <div style="background: #fafafa; border: 1px solid #e0e0e0; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; font-family: 'Crimson Pro', serif;">
          <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
            <caption style="font-weight: 600; margin-bottom: 1rem; text-align: left;">Table 1: Effect of Education on Earnings</caption>
            <thead>
              <tr style="border-bottom: 2px solid #333;">
                <th style="text-align: left; padding: 0.5rem;"></th>
                <th style="text-align: center; padding: 0.5rem;">(1) Basic</th>
                <th style="text-align: center; padding: 0.5rem;">(2) Controls</th>
                <th style="text-align: center; padding: 0.5rem;">(3) Industry FE</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td style="padding: 0.5rem;">Education (years)</td>
                <td style="text-align: center; padding: 0.5rem;">0.089***</td>
                <td style="text-align: center; padding: 0.5rem;">0.074***</td>
                <td style="text-align: center; padding: 0.5rem;">0.068***</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem;"></td>
                <td style="text-align: center; padding: 0.25rem; color: #666;">(0.003)</td>
                <td style="text-align: center; padding: 0.25rem; color: #666;">(0.003)</td>
                <td style="text-align: center; padding: 0.25rem; color: #666;">(0.004)</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem;">Age</td>
                <td style="text-align: center; padding: 0.5rem;">0.012***</td>
                <td style="text-align: center; padding: 0.5rem;">0.008***</td>
                <td style="text-align: center; padding: 0.5rem;">0.007***</td>
              </tr>
              <tr style="border-bottom: 1px solid #ccc;">
                <td style="padding: 0.5rem;"></td>
                <td style="text-align: center; padding: 0.25rem; color: #666;">(0.001)</td>
                <td style="text-align: center; padding: 0.25rem; color: #666;">(0.001)</td>
                <td style="text-align: center; padding: 0.25rem; color: #666;">(0.001)</td>
              </tr>
              <tr>
                <td style="padding: 0.5rem;">R-squared</td>
                <td style="text-align: center; padding: 0.5rem;">0.142</td>
                <td style="text-align: center; padding: 0.5rem;">0.187</td>
                <td style="text-align: center; padding: 0.5rem;">0.234</td>
              </tr>
              <tr style="border-bottom: 2px solid #333;">
                <td style="padding: 0.5rem;">Observations</td>
                <td style="text-align: center; padding: 0.5rem;">45,231</td>
                <td style="text-align: center; padding: 0.5rem;">45,231</td>
                <td style="text-align: center; padding: 0.5rem;">45,231</td>
              </tr>
            </tbody>
          </table>
          <p style="font-size: 0.8rem; color: #666; margin-top: 0.75rem;">Standard errors in parentheses. * p<0.10, ** p<0.05, *** p<0.01</p>
        </div>

        <h3>R: modelsummary</h3>

        <pre><code class="language-r">library(modelsummary)
library(fixest)

# Run regressions
m1 <- feols(earnings ~ education + age, data = df)
m2 <- feols(earnings ~ education + age + experience, data = df)
m3 <- feols(earnings ~ education + age + experience | industry, data = df)

# Export to LaTeX
modelsummary(
  list("Basic" = m1, "Controls" = m2, "Industry FE" = m3),
  output = here("output", "tables", "main_results.tex"),
  stars = c('*' = 0.10, '**' = 0.05, '***' = 0.01),
  coef_rename = c("education" = "Education (years)", "age" = "Age"),
  gof_omit = "AIC|BIC|Log",
  title = "Effect of Education on Earnings",
  notes = "Standard errors in parentheses."
)</code></pre>

        <h3>Python: stargazer</h3>

        <pre><code class="language-python">from stargazer.stargazer import Stargazer
import statsmodels.api as sm

# Run regressions
X1 = sm.add_constant(df[['education', 'age']])
m1 = sm.OLS(df['earnings'], X1).fit(cov_type='HC1')

X2 = sm.add_constant(df[['education', 'age', 'experience']])
m2 = sm.OLS(df['earnings'], X2).fit(cov_type='HC1')

# Export to LaTeX
stargazer = Stargazer([m1, m2])
stargazer.title("Effect of Education on Earnings")
stargazer.custom_columns(["Basic", "Controls"])

with open(PATHS['tables'] / 'main_results.tex', 'w') as f:
    f.write(stargazer.render_latex())</code></pre>

        <h3>Including Tables in LaTeX</h3>

        <p>In your paper's .tex file, simply input the generated table:</p>

        <pre><code class="language-latex">\begin{table}[htbp]
\centering
\input{../output/tables/main_results.tex}
\end{table}</code></pre>

        <h2>8.7 One-Click Pipeline: Full Integration</h2>

        <p>The ultimate goal is a workflow where one command reproduces your entire paper‚Äîdata cleaning, analysis, tables, figures, and the compiled PDF.</p>

        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; padding: 2rem; margin: 2rem 0; color: white;">
          <h3 style="color: white; margin-top: 0;">The Dream Workflow</h3>
          <div style="display: flex; align-items: center; justify-content: space-around; flex-wrap: wrap; gap: 1rem; margin: 1.5rem 0;">
            <div style="text-align: center;">
              <div style="font-size: 2rem;">üìä</div>
              <div style="font-size: 0.85rem;">Raw Data</div>
            </div>
            <div style="font-size: 1.5rem;">‚Üí</div>
            <div style="text-align: center;">
              <div style="font-size: 2rem;">‚öôÔ∏è</div>
              <div style="font-size: 0.85rem;">Master Script</div>
            </div>
            <div style="font-size: 1.5rem;">‚Üí</div>
            <div style="text-align: center;">
              <div style="font-size: 2rem;">üìà</div>
              <div style="font-size: 0.85rem;">Tables & Figures</div>
            </div>
            <div style="font-size: 1.5rem;">‚Üí</div>
            <div style="text-align: center;">
              <div style="font-size: 2rem;">üìÑ</div>
              <div style="font-size: 0.85rem;">Compiled PDF</div>
            </div>
          </div>
          <p style="text-align: center; margin-bottom: 0; font-style: italic;">One command. Fully reproducible. No manual intervention.</p>
        </div>

        <h3>Option 1: Makefile (Most Powerful)</h3>

        <p>A Makefile specifies dependencies and only re-runs what's needed:</p>

        <pre><code class="language-makefile"># Makefile for research project
# Run with: make all

.PHONY: all clean data analysis paper

# Default target
all: paper

# Data processing (depends on raw data)
data/processed/clean_data.dta: data/raw/cps_2019.dta code/01_import_clean.do
	stata-mp -b do code/01_import_clean.do

# Analysis (depends on processed data)
output/tables/main_results.tex: data/processed/clean_data.dta code/04_main_analysis.do
	stata-mp -b do code/04_main_analysis.do

output/figures/figure1.pdf: data/processed/clean_data.dta code/04_main_analysis.do
	stata-mp -b do code/04_main_analysis.do

# Paper (depends on tables and figures)
paper/main.pdf: paper/main.tex output/tables/main_results.tex output/figures/figure1.pdf
	cd paper && pdflatex main.tex && bibtex main && pdflatex main.tex && pdflatex main.tex

paper: paper/main.pdf

# Clean all generated files
clean:
	rm -f data/processed/*.dta
	rm -f output/tables/*.tex
	rm -f output/figures/*.pdf
	rm -f paper/*.pdf paper/*.aux paper/*.log paper/*.bbl paper/*.blg</code></pre>

        <h3>Option 2: Shell Script (Simpler)</h3>

        <pre><code class="language-bash">#!/bin/bash
# run_all.sh - Reproduce entire paper

echo "Starting full pipeline..."
echo "========================="

# Run Stata analysis
echo "Step 1: Running Stata analysis..."
stata-mp -b do code/00_master.do

# Run Python visualizations (if any)
echo "Step 2: Running Python scripts..."
python code/06_visualizations.py

# Compile LaTeX paper
echo "Step 3: Compiling paper..."
cd paper
pdflatex main.tex
bibtex main
pdflatex main.tex
pdflatex main.tex

echo "========================="
echo "Done! Paper saved to paper/main.pdf"</code></pre>

        <h3>Option 3: Overleaf + Dropbox/GitHub Sync</h3>

        <p>For teams using Overleaf, you can sync your output folder:</p>

        <ol>
          <li><strong>Link Overleaf to GitHub:</strong> Overleaf can pull from a GitHub repository</li>
          <li><strong>Structure:</strong> Put your <code>output/</code> folder in the repo</li>
          <li><strong>Workflow:</strong>
            <ul>
              <li>Run analysis locally ‚Üí tables/figures saved to <code>output/</code></li>
              <li>Push to GitHub</li>
              <li>Pull in Overleaf ‚Üí paper auto-compiles with new results</li>
            </ul>
          </li>
        </ol>

        <pre><code class="language-bash"># After running your analysis
git add output/tables/*.tex output/figures/*.pdf
git commit -m "Update results"
git push

# Overleaf syncs automatically if linked to the repo</code></pre>

        <h2>8.8 LaTeX Paper Structure</h2>

        <p>Large papers should be split into sections for easier editing and collaboration. Use a master file that inputs each section.</p>

        <h3>Project Structure</h3>

        <div style="background: #2d2d2d; border-radius: 8px; padding: 1.5rem; margin: 1.5rem 0; font-family: 'Fira Code', monospace; color: #e0e0e0; font-size: 0.9rem;">
          <div style="color: #64b5f6; margin-bottom: 1rem;">üìÅ paper/</div>
          <div style="padding-left: 1rem;">
            <div>‚îú‚îÄ‚îÄ <span style="color: #f48fb1; font-weight: 600;">main.tex</span> <span style="color: #888;">‚Üê Master file (compile this)</span></div>
            <div>‚îú‚îÄ‚îÄ <span style="color: #aaa;">preamble.tex</span> <span style="color: #888;">‚Üê Packages and settings</span></div>
            <div>‚îú‚îÄ‚îÄ <span style="color: #64b5f6;">sections/</span></div>
            <div style="padding-left: 1.5rem;">
              <div>‚îú‚îÄ‚îÄ 01_introduction.tex</div>
              <div>‚îú‚îÄ‚îÄ 02_literature.tex</div>
              <div>‚îú‚îÄ‚îÄ 03_data.tex</div>
              <div>‚îú‚îÄ‚îÄ 04_methodology.tex</div>
              <div>‚îú‚îÄ‚îÄ 05_results.tex</div>
              <div>‚îú‚îÄ‚îÄ 06_conclusion.tex</div>
              <div>‚îî‚îÄ‚îÄ appendix.tex</div>
            </div>
            <div>‚îú‚îÄ‚îÄ <span style="color: #aaa;">bibliography.bib</span></div>
            <div>‚îî‚îÄ‚îÄ <span style="color: #64b5f6;">figures/</span> <span style="color: #888;">‚Üê Or symlink to ../output/figures</span></div>
          </div>
        </div>

        <h3>Master File (main.tex)</h3>

        <pre><code class="language-latex">% main.tex - Master file for paper
\documentclass[12pt]{article}

% Load preamble (packages, settings, custom commands)
\input{preamble}

\title{The Employment Effects of Minimum Wage Increases}
\author{Jane Smith\thanks{University of Example. Email: jsmith@example.edu}}
\date{\today}

\begin{document}

\maketitle

\begin{abstract}
Your abstract here...
\end{abstract}

% Main content - each section in separate file
\input{sections/01_introduction}
\input{sections/02_literature}
\input{sections/03_data}
\input{sections/04_methodology}
\input{sections/05_results}
\input{sections/06_conclusion}

% Bibliography
\bibliographystyle{aer}
\bibliography{bibliography}

% Appendix
\appendix
\input{sections/appendix}

\end{document}</code></pre>

        <h3>Preamble File (preamble.tex)</h3>

        <pre><code class="language-latex">% preamble.tex - Packages and settings

% Essential packages
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb}
\usepackage{graphicx}
\usepackage{booktabs}        % Professional tables
\usepackage{natbib}          % Citations
\usepackage{hyperref}        % Clickable links
\usepackage{setspace}        % Line spacing
\usepackage[margin=1in]{geometry}

% For including Stata/R output tables
\usepackage{threeparttable}  % Table notes
\usepackage{tabularx}        % Flexible columns
\usepackage{siunitx}         % Number alignment

% Path to figures and tables (relative to main.tex)
\graphicspath{{../output/figures/}{figures/}}

% Custom commands for convenience
\newcommand{\tabpath}{../output/tables/}

% Double spacing for submission
\doublespacing</code></pre>

        <h3>Including Generated Tables</h3>

        <pre><code class="language-latex">% In sections/05_results.tex

\section{Results}

Table \ref{tab:main} presents our main results...

\begin{table}[htbp]
\centering
\caption{Effect of Minimum Wage on Employment}
\label{tab:main}
\input{\tabpath main_results.tex}
\end{table}

The coefficient on minimum wage in column (3) suggests that...</code></pre>

        <h3>Compiling the Paper</h3>

        <pre><code class="language-bash"># From the paper/ directory
cd paper

# Full compilation with bibliography
pdflatex main.tex       # First pass
bibtex main             # Process citations
pdflatex main.tex       # Resolve references
pdflatex main.tex       # Final pass

# Or use latexmk (handles everything automatically)
latexmk -pdf main.tex</code></pre>

        <div class="tip-box" style="background: #e8f5e9; border-left: 4px solid #4caf50; padding: 1rem 1.25rem; margin: 1.5rem 0;">
          <strong>VS Code + LaTeX Workshop:</strong> Install the LaTeX Workshop extension in VS Code for:
          <ul style="margin: 0.5rem 0 0 0; padding-left: 1.25rem;">
            <li>Auto-compilation on save</li>
            <li>PDF preview side-by-side</li>
            <li>Syntax highlighting and snippets</li>
            <li>Forward/inverse search (click in PDF ‚Üí go to code)</li>
          </ul>
        </div>

        <h2>8.9 Replicating Published Papers</h2>

        <p><strong>Where to find replication materials:</strong></p>
        <ul>
          <li>AEA Data Repository: <a href="https://www.openicpsr.org/openicpsr/search/aea/studies" target="_blank">openicpsr.org</a></li>
          <li>Harvard Dataverse: <a href="https://dataverse.harvard.edu/" target="_blank">dataverse.harvard.edu</a></li>
          <li>Author websites and GitHub</li>
        </ul>

        <p><strong>Steps to replicate:</strong></p>
        <ol>
          <li>Find and download replication package</li>
          <li>Read the paper and README carefully</li>
          <li>Install required software/packages</li>
          <li>Run the master script</li>
          <li>Compare output to published tables</li>
        </ol>

        <div class="citation">
          <div class="citation-title">Essential Reading</div>
          <p>Gentzkow, M. & Shapiro, J. (2014). <a href="https://web.stanford.edu/~gentzkow/research/CodeAndData.pdf" target="_blank">"Code and Data for the Social Sciences"</a></p>
        </div>

        <div class="nav-footer">
          <a href="07-estimation.html" class="nav-link prev">Module 7: Estimation</a>
          <a href="09-github.html" class="nav-link next">Module 9: GitHub</a>
        </div>
      </div>
    </main>
  </div>

  <!-- Chatbot Widget -->
  <div id="chatbot-widget" class="chatbot-widget">
    <button id="chatbot-toggle" class="chatbot-toggle" aria-label="Open course assistant">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
    </button>
    <div id="chatbot-panel" class="chatbot-panel">
      <div class="chatbot-header">
        <h3>ProTools ER1 Assistant</h3>
        <button id="chatbot-close" class="chatbot-close">&times;</button>
      </div>
      <div id="chatbot-messages" class="chatbot-messages">
        <div class="chat-message assistant">
          <p>Hello! I'm the ProTools ER1 course assistant. I can help you with questions about Python, Stata, R, causal inference methods, or any of the course material. How can I assist you today?</p>
        </div>
      </div>
      <div class="chatbot-input-area">
        <textarea id="chatbot-input" placeholder="Ask a question about the course..." rows="2"></textarea>
        <button id="chatbot-send">Send</button>
      </div>
    </div>
  </div>

  <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">Menu</button>
  <script src="../js/main.js"></script>
  <script src="../js/password-protection.js"></script>
  <script src="../js/chatbot.js"></script>
</body>
</html>
