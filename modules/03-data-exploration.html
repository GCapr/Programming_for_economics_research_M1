<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Module 3: Data Exploration | ProTools ER1</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=Fira+Code:wght@400;500&family=Source+Sans+Pro:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .protected-content { -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; }
    .output-simulation { background: #1e1e1e; border-radius: 8px; margin: 1rem 0; overflow: hidden; font-family: 'Fira Code', monospace; font-size: 0.8rem; display: none; }
    .output-simulation.visible { display: block; }
    .output-header { background: #333; padding: 0.5rem 1rem; display: flex; justify-content: space-between; align-items: center; color: #ccc; font-size: 0.75rem; }
    .output-body { padding: 1rem; color: #d4d4d4; white-space: pre-wrap; overflow-x: auto; max-height: 350px; overflow-y: auto; }
    .output-body .out-green { color: #4ec9b0; }
    .output-body .out-yellow { color: #dcdcaa; }
    .output-body .out-blue { color: #569cd6; }
    .output-body .out-num { color: #b5cea8; }
    .output-body .out-str { color: #ce9178; }
    .research-banner { background: #4a5568; color: white; padding: 2rem; border-radius: 12px; margin: 2rem 0; border-left: 5px solid #ed8936; }
    .research-banner h3 { color: white; margin-top: 0; }
    .concept-box { background: #f0f9ff; border-left: 4px solid #2563eb; padding: 1.5rem; margin: 1.5rem 0; border-radius: 0 8px 8px 0; }
    .concept-box h4 { color: #1e40af; margin-top: 0; }
    .workflow-diagram { background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 12px; padding: 1.5rem; margin: 2rem 0; }
    .workflow-steps { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 0.75rem; }
    .workflow-step { flex: 1; min-width: 100px; text-align: center; padding: 0.75rem; background: white; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
    .workflow-step-number { width: 28px; height: 28px; background: #2563eb; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 0.5rem; font-weight: bold; font-size: 0.85rem; }
    .workflow-arrow { color: #2563eb; font-size: 1.25rem; flex-shrink: 0; }
    @media (max-width: 768px) { .workflow-steps { flex-direction: column; } .workflow-arrow { transform: rotate(90deg); } }
    /* Run button */
    .run-btn { background: #22c55e; color: white; border: none; padding: 0.5rem 1rem; border-radius: 6px; cursor: pointer; font-size: 0.85rem; font-weight: 600; margin-top: 0.5rem; display: inline-flex; align-items: center; gap: 0.5rem; }
    .run-btn:hover { background: #16a34a; }
    .run-btn::before { content: '‚ñ∂'; font-size: 0.7rem; }
    .close-output { background: transparent; border: none; color: #9ca3af; cursor: pointer; font-size: 1.2rem; }
    .close-output:hover { color: white; }
    /* Code tooltips - hover explanations (JavaScript-powered for boundary detection) */
    .code-tooltip {
      position: relative;
      cursor: help;
      border-bottom: 1px dotted #888;
      text-decoration: none;
    }

    /* Tooltip element created by JavaScript */
    .tooltip-popup {
      position: fixed;
      background: #1f2937;
      color: white;
      padding: 0.5rem 0.75rem;
      border-radius: 6px;
      font-size: 0.75rem;
      white-space: normal;
      max-width: 300px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.15s ease-in-out;
      z-index: 10000;
      line-height: 1.4;
      text-align: left;
      font-family: var(--font-body);
      font-style: normal;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .tooltip-popup.visible {
      opacity: 1;
    }

    /* Small arrow pointer */
    .tooltip-popup::after {
      content: '';
      position: absolute;
      border: 6px solid transparent;
    }
    .tooltip-popup.arrow-bottom::after {
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      border-top-color: #1f2937;
    }
    .tooltip-popup.arrow-top::after {
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      border-bottom-color: #1f2937;
    }
    .tooltip-popup.arrow-left::after {
      top: 50%;
      right: 100%;
      transform: translateY(-50%);
      border-right-color: #1f2937;
    }
    .tooltip-popup.arrow-right::after {
      top: 50%;
      left: 100%;
      transform: translateY(-50%);
      border-left-color: #1f2937;
    }
  </style>
</head>
<body>
  <div id="password-overlay" class="password-overlay">
    <div class="password-modal">
      <h2>ProTools ER1</h2>
      <p>Programming Tools for Empirical Research</p>
      <p style="font-size: 0.9rem; color: #666; margin-bottom: 1.5rem;">Please enter the course password to access the materials.</p>
      <input type="password" id="password-input" placeholder="Enter password" autocomplete="off">
      <button id="password-submit">Access Course</button>
      <p id="password-error" style="color: #e53e3e; font-size: 0.85rem; margin-top: 1rem; display: none;">Incorrect password. Please try again.</p>
    </div>
  </div>

  <div class="page-wrapper protected-content">
    <aside class="sidebar">
      <a href="../index.html" class="sidebar-logo">ProTools ER1</a>
      <span class="sidebar-subtitle">Programming Tools for Empirical Research</span>
      <nav>
        <ul>
          <li><a href="../index.html"><span class="welcome-icon">üè†</span> Welcome</a></li>
          <li>
            <a href="00-languages-platforms.html"><span class="module-number">0</span> Languages &amp; Platforms</a>
            <ul class="sub-nav">
              <li><a href="00a-rstudio-guide.html">RStudio Guide</a></li>
              <li><a href="00b-stata-guide.html">Stata Guide</a></li>
              <li><a href="00c-vscode-guide.html">VS Code Guide</a></li>
              <li><a href="00d-notebooks-guide.html">Notebooks Guide</a></li>
            </ul>
          </li>
          <li><a href="01-getting-started.html"><span class="module-number">1</span> Getting Started</a></li>
          <li>
            <a href="02-data-harnessing.html"><span class="module-number">2</span> Data Harnessing</a>
            <ul class="sub-nav">
              <li><a href="02a-file-import.html">Importing from Files</a></li>
              <li><a href="02b-apis.html">Working with APIs</a></li>
              <li><a href="02c-web-scraping.html">Web Scraping</a></li>
            </ul>
          </li>
          <li><a href="03-data-exploration.html" class="active"><span class="module-number">3</span> Data Exploration</a></li>
          <li><a href="04-data-cleaning.html"><span class="module-number">4</span> Data Cleaning</a></li>
          <li><a href="05-data-analysis.html"><span class="module-number">5</span> Data Analysis</a></li>
          <li><a href="06-causal-inference.html"><span class="module-number">6</span> Causal Inference</a></li>
          <li><a href="07-estimation.html"><span class="module-number">7</span> Estimation Methods</a></li>
          <li><a href="08-replicability.html"><span class="module-number">8</span> Replicability</a></li>
          <li><a href="09-github.html"><span class="module-number">9</span> Git &amp; GitHub</a></li>
          <li><a href="10-nlp-history.html"><span class="module-number">10</span> History of NLP</a></li>
          <li><a href="11-machine-learning.html"><span class="module-number">11</span> Machine Learning</a></li>
          <li><a href="12-llms.html"><span class="module-number">12</span> Large Language Models</a></li>
          <li><a href="../resources.html">Resources</a></li>
          <li><a href="contact.html">Contact &amp; Feedback</a></li>
        </ul>
      </nav>
    </aside>

    <main class="main-content">
      <div class="content">
        <div class="module-header">
          <h1>3 &nbsp;Data Exploration</h1>
          <div class="module-meta">
            <span>~4 hours</span>
            <span>Loading, Understanding, Exploring</span>
            <span>Beginner-Intermediate</span>
          </div>
        </div>

        <div class="learning-objectives">
          <h3>Learning Objectives</h3>
          <ul>
            <li>Load data from CSV, Excel, and Stata formats</li>
            <li>Understand dataset structure before any analysis</li>
            <li>Build a comprehensive "First Analysis" script</li>
            <li>Explore distributions, ranges, and correlations</li>
          </ul>
        </div>

        <!-- Research Project Introduction -->
        <div class="research-banner">
          <h3>Course Research Project: Climate Policy & Economic Development</h3>
          <p style="margin-bottom: 1rem;">Throughout this course, we'll build a complete research project worthy of publication. Our question:</p>
          <p style="font-size: 1.1rem; font-style: italic; margin-bottom: 1rem;"><strong>"How does climate vulnerability affect economic growth across countries, and do international climate agreements moderate this relationship?"</strong></p>
          <p style="margin-bottom: 0; font-size: 0.9rem;">This project uses real World Bank data, involves API calls, text analysis of policy documents, and causal inference methods. Each module advances the project.</p>
        </div>

        <!-- Critical Introduction -->
        <div class="info-box warning" style="margin: 2rem 0;">
          <div class="info-box-title">A Critical Mistake I See Constantly</div>
          <p>In my years of teaching, I've watched many students&mdash;(and occasionally also senior researchers...)&mdash;make a costly mistake: <strong>jumping straight into analysis without first getting to know their data.</strong></p>
          <p>The consequences: running regressions on variables with 80% missing values, drawing conclusions from data entry errors, missing obvious patterns, etc. <strong> In this module I'll share a more disciplined approach.</strong></p>
        </div>

        <!-- Workflow -->
        <h2>The Data Exploration Workflow</h2>
        <div class="workflow-diagram">
          <div class="workflow-steps">
            <div class="workflow-step"><div class="workflow-step-number">1</div><strong>Load</strong><p style="font-size: 0.8rem; margin: 0.25rem 0 0;">Import data</p></div>
            <span class="workflow-arrow">&rarr;</span>
            <div class="workflow-step"><div class="workflow-step-number">2</div><strong>Inspect</strong><p style="font-size: 0.8rem; margin: 0.25rem 0 0;">Structure & types</p></div>
            <span class="workflow-arrow">&rarr;</span>
            <div class="workflow-step"><div class="workflow-step-number">3</div><strong>Summarize</strong><p style="font-size: 0.8rem; margin: 0.25rem 0 0;">Distributions</p></div>
            <span class="workflow-arrow">&rarr;</span>
            <div class="workflow-step"><div class="workflow-step-number">4</div><strong>Visualize</strong><p style="font-size: 0.8rem; margin: 0.25rem 0 0;">Patterns</p></div>
            <span class="workflow-arrow">&rarr;</span>
            <div class="workflow-step"><div class="workflow-step-number">5</div><strong>Correlate</strong><p style="font-size: 0.8rem; margin: 0.25rem 0 0;">Relationships</p></div>
          </div>
        </div>

        <!-- STEP 1: Loading Data -->
        <h2>Step 1: Loading Data</h2>

        <div class="concept-box">
          <h4>What is "Loading Data"?</h4>
          <p style="margin-bottom: 0;">Loading data means reading information from a file into your program's memory. The file stays unchanged&mdash;you create a working copy. Different formats (CSV, Excel, Stata) require different commands.</p>
        </div>

        <p>For our research project, we'll use World Bank development indicators. Click <strong>Run</strong> to see the output for each language:</p>

        <div class="code-tabs" data-runnable="load-1">
          <div class="tab-buttons">
            <button class="tab-button active" data-lang="python">Python</button>
            <button class="tab-button" data-lang="stata">Stata</button>
            <button class="tab-button" data-lang="r">R</button>
          </div>
          <div class="tab-content active" data-lang="python">
<pre><code><span class="code-comment"># COMPLETE EXAMPLE: Load World Bank data directly from URL</span>
<span class="code-comment"># This demonstrates loading CSV data from the internet</span>

<span class="code-comment"># Import pandas - the main data manipulation library in Python</span>
<span class="code-tooltip" data-tip="IMPORT: This keyword loads external code libraries into your program. Think of it like borrowing a toolbox - you're bringing in tools someone else created so you don't have to build them yourself."><span class="code-keyword">import</span></span> <span class="code-tooltip" data-tip="PANDAS: Python's most popular library for working with data tables (called DataFrames). It lets you load, manipulate, and analyze data similar to Excel but much more powerful. Named after 'panel data' used in economics.">pandas</span> <span class="code-tooltip" data-tip="AS PD: Creates a nickname 'pd' for pandas. Instead of typing 'pandas.read_csv()', you can type 'pd.read_csv()'. This is a universal convention - almost every Python programmer uses 'pd' for pandas."><span class="code-keyword">as</span> pd</span>

<span class="code-comment"># World Bank provides CSV downloads - we use GDP data</span>
<span class="code-comment"># This URL points to a publicly available dataset on GitHub</span>
<span class="code-tooltip" data-tip="VARIABLE ASSIGNMENT: 'url' is a variable (a named container) that stores the web address. Variables let you reuse values without retyping them. The '=' sign means 'store this value'.">url</span> = <span class="code-tooltip" data-tip="URL STRING: This is the web address pointing to a CSV file hosted on GitHub. CSV files are simple text files where values are separated by commas - the most common format for sharing data."><span class="code-string">"https://raw.githubusercontent.com/datasets/gdp/master/data/gdp.csv"</span></span>

<span class="code-comment"># read_csv() loads CSV data into a DataFrame</span>
<span class="code-comment"># It automatically detects column names and data types</span>
<span class="code-tooltip" data-tip="DATAFRAME: 'df' is a common abbreviation for DataFrame - a table of data with rows and columns. This line reads the CSV file from the URL and stores it as a table in memory.">df</span> = <span class="code-tooltip" data-tip="READ_CSV(): This function loads a CSV file into a DataFrame. It automatically detects column names from the first row and guesses data types (numbers, text, dates). Can read from URLs or local files.">pd.read_csv(url)</span>

<span class="code-comment"># Verify the load worked by checking dimensions</span>
<span class="code-comment"># len(df) returns number of rows, len(df.columns) returns number of columns</span>
<span class="code-tooltip" data-tip="PRINT(): Displays output to the screen. Essential for seeing results of your code. Everything inside the parentheses gets shown."><span class="code-keyword">print</span></span>(<span class="code-tooltip" data-tip="F-STRING: The 'f' before the quote creates a 'formatted string'. Text inside {curly braces} gets replaced with actual values. The ':,' adds thousand separators (14,112 instead of 14112)."><span class="code-string">f"Loaded {<span class="code-tooltip" data-tip="LEN(DF): Returns the number of rows in your DataFrame. 'len' is short for 'length'. For a DataFrame, length means how many observations/records you have.">len(df)</span>:,} rows and {<span class="code-tooltip" data-tip="DF.COLUMNS: Returns the list of column names. len(df.columns) counts how many columns exist. Columns represent different variables in your data.">len(df.columns)</span>} columns"</span></span>)
<span class="code-keyword">print</span>(<span class="code-string">f"Columns: {<span class="code-tooltip" data-tip="LIST(DF.COLUMNS): Converts column names to a Python list for nice display. Shows you exactly what variables are available in your data.">list(df.columns)</span>}"</span>)</code></pre>
            <button class="run-btn" data-lang="python">Run Code</button>
          </div>
          <div class="tab-content" data-lang="stata">
<pre><code><span class="code-comment">* COMPLETE EXAMPLE: Load World Bank data</span>
<span class="code-comment">* Stata can import CSV files directly from URLs</span>

<span class="code-comment">* Clear any existing data from memory</span>
<span class="code-tooltip" data-tip="CLEAR ALL: Wipes everything from Stata's memory - all data, variables, and stored results. Think of it as starting with a clean slate. Always use this before loading new data to avoid mixing datasets."><span class="code-keyword">clear</span> all</span>

<span class="code-comment">* Import CSV file from URL into Stata</span>
<span class="code-comment">* 'delimited' means comma-separated values</span>
<span class="code-comment">* 'clear' option replaces any data in memory</span>
<span class="code-tooltip" data-tip="IMPORT DELIMITED: Reads CSV files (comma-separated values) into Stata. Can read from web URLs or local files on your computer. The 'clear' option ensures any existing data is removed first."><span class="code-keyword">import</span> delimited</span> <span class="code-tooltip" data-tip="URL STRING: The web address where the CSV file is located. Stata can download data directly from the internet - no need to save the file first."><span class="code-string">"https://raw.githubusercontent.com/datasets/gdp/master/data/gdp.csv"</span></span><span class="code-tooltip" data-tip="CLEAR OPTION: This option tells Stata to remove any existing data before loading the new file. Options in Stata come after a comma.">, clear</span>

<span class="code-comment">* Verify the load - describe shows variable info</span>
<span class="code-comment">* 'short' option gives a compact summary</span>
<span class="code-tooltip" data-tip="DESCRIBE: Shows the structure of your dataset - how many observations (rows), how many variables (columns), and what type each variable is. The 'short' option gives a compact summary instead of listing every variable."><span class="code-keyword">describe</span>, short</span>

<span class="code-comment">* List first 5 observations to preview the data</span>
<span class="code-tooltip" data-tip="LIST IN 1/5: Displays observations 1 through 5 (the first five rows). 'in 1/5' is Stata's way of saying 'from row 1 to row 5'. Essential for visually checking if your data loaded correctly."><span class="code-keyword">list</span> in 1/5</span></code></pre>
            <button class="run-btn" data-lang="stata">Run Code</button>
          </div>
          <div class="tab-content" data-lang="r">
<pre><code><span class="code-comment"># COMPLETE EXAMPLE: Load World Bank data directly from URL</span>
<span class="code-comment"># R can read CSV files from URLs natively</span>

<span class="code-comment"># Load tidyverse - a collection of R packages for data science</span>
<span class="code-comment"># Includes readr (for reading data), dplyr (for manipulation), ggplot2 (for visualization)</span>
<span class="code-tooltip" data-tip="LIBRARY(): Loads an R package (a collection of pre-built functions). You must load packages before using their functions. Think of it like opening a toolbox."><span class="code-function">library</span></span><span class="code-tooltip" data-tip="TIDYVERSE: A collection of R packages designed for data science. Includes: readr (reading data), dplyr (data manipulation), ggplot2 (visualization), and more. Loading tidyverse gives you access to all of them at once.">(tidyverse)</span>

<span class="code-comment"># Define the URL pointing to our CSV data</span>
<span class="code-tooltip" data-tip="VARIABLE ASSIGNMENT: 'url' is a variable name (a container for data). The arrow '<-' is R's assignment operator - it stores the value on the right into the variable on the left. You can also use '=' but '<-' is traditional R style.">url</span> <span class="code-tooltip" data-tip="ASSIGNMENT ARROW: R's way of saying 'store this value'. Points from the value to the variable name. Read it as 'url gets the value...'"><-</span> <span class="code-tooltip" data-tip="URL STRING: A web address in quotes pointing to the CSV file. R can read data directly from URLs without downloading the file first."><span class="code-string">"https://raw.githubusercontent.com/datasets/gdp/master/data/gdp.csv"</span></span>

<span class="code-comment"># read_csv() from readr package loads the data into a tibble</span>
<span class="code-comment"># A tibble is a modern version of R's data.frame</span>
<span class="code-tooltip" data-tip="DATAFRAME: 'df' stores the loaded data table. A tibble is R's modern data table format - like a spreadsheet with rows and columns. It's smarter about displaying data and catching errors than older formats.">df</span> <- <span class="code-tooltip" data-tip="READ_CSV(): Reads a CSV file and returns a tibble (data table). Part of the readr package in tidyverse. Faster and smarter than base R's read.csv() - automatically detects column types and handles common issues."><span class="code-function">read_csv</span>(url)</span>

<span class="code-comment"># Print dimensions and column names</span>
<span class="code-comment"># nrow() = number of rows, ncol() = number of columns</span>
<span class="code-tooltip" data-tip="CAT(): Prints text to the console. Unlike print(), cat() doesn't add quotes or line numbers - cleaner for custom output messages."><span class="code-function">cat</span></span>(<span class="code-tooltip" data-tip="SPRINTF(): Creates formatted text by inserting values into placeholders. %s = string, %d = integer, \n = new line. Like Python's f-strings but with different syntax."><span class="code-function">sprintf</span></span>(<span class="code-string">"Loaded %s rows and %d columns\n"</span>,
    <span class="code-tooltip" data-tip="FORMAT(): Converts numbers to text with formatting. big.mark=',' adds thousand separators (14,112 instead of 14112) for readability."><span class="code-function">format</span></span>(<span class="code-tooltip" data-tip="NROW(): Returns the number of rows in your data frame. Short for 'number of rows'. Essential for checking how many observations you have."><span class="code-function">nrow</span>(df)</span>, big.mark=<span class="code-string">","</span>), <span class="code-tooltip" data-tip="NCOL(): Returns the number of columns in your data frame. Each column represents a different variable in your data."><span class="code-function">ncol</span>(df)</span>))
<span class="code-tooltip" data-tip="PRINT(): Displays output to the console. Works on any R object. For data frames, shows the data; for vectors, shows the values."><span class="code-function">print</span></span>(<span class="code-tooltip" data-tip="NAMES(): Returns all column names as a character vector. Essential for seeing what variables are available in your dataset."><span class="code-function">names</span>(df)</span>)</code></pre>
            <button class="run-btn" data-lang="r">Run Code</button>
          </div>
        </div>

        <!-- Output simulations for Step 1 -->
        <div class="output-simulation" data-output="load-1" data-lang="python">
          <div class="output-header">
            <span>Python Output (VS Code)</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body">Loaded <span class="out-num">14,112</span> rows and <span class="out-num">4</span> columns
Columns: [<span class="out-str">'Country Name'</span>, <span class="out-str">'Country Code'</span>, <span class="out-str">'Year'</span>, <span class="out-str">'Value'</span>]</div>
        </div>

        <div class="output-simulation" data-output="load-1" data-lang="stata">
          <div class="output-header">
            <span>Stata Output</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body"><span class="out-str">. import delimited "https://...gdp.csv", clear</span>
(encoding automatically selected: UTF-8)
(4 vars, 14,112 obs)

<span class="out-str">. describe, short</span>

Contains data
 Observations:        <span class="out-num">14,112</span>
    Variables:             <span class="out-num">4</span>

<span class="out-str">. list in 1/5</span>

     +--------------------------------------------------+
     |    countryname   countrycode   year        value |
     |--------------------------------------------------|
  1. |     Arab World           ARB   1968   2.5761e+10 |
  2. |     Arab World           ARB   1969   2.8434e+10 |
  3. |     Arab World           ARB   1970   3.1386e+10 |
  4. |     Arab World           ARB   1971   3.5875e+10 |
  5. |     Arab World           ARB   1972   4.2509e+10 |
     +--------------------------------------------------+</div>
        </div>

        <div class="output-simulation" data-output="load-1" data-lang="r">
          <div class="output-header">
            <span>R Output (RStudio Console)</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body"><span class="out-blue">Rows: 14112 Columns: 4</span>
<span class="out-str">‚îÄ‚îÄ Column specification ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>
Delimiter: ","
<span class="out-green">chr</span> (2): Country Name, Country Code
<span class="out-green">dbl</span> (2): Year, Value

Loaded <span class="out-num">14,112</span> rows and <span class="out-num">4</span> columns
[1] <span class="out-str">"Country Name"</span> <span class="out-str">"Country Code"</span> <span class="out-str">"Year"</span> <span class="out-str">"Value"</span></div>
        </div>

        <!-- STEP 2: Inspecting Structure -->
        <h2>Step 2: Inspecting Structure</h2>

        <p>Before analyzing data, we need to understand its structure: what variables exist, their types, and any missing values.</p>

        <div class="code-tabs" data-runnable="inspect-1">
          <div class="tab-buttons">
            <button class="tab-button active" data-lang="python">Python</button>
            <button class="tab-button" data-lang="stata">Stata</button>
            <button class="tab-button" data-lang="r">R</button>
          </div>
          <div class="tab-content active" data-lang="python">
<pre><code><span class="code-comment"># Continuing from above - inspect the data structure</span>
<span class="code-comment"># This is crucial before any analysis!</span>

<span class="code-comment"># info() shows data types and non-null counts for each column</span>
<span class="code-comment"># This reveals missing values and helps identify type issues</span>
<span class="code-keyword">print</span>(<span class="code-string">"=== DATA STRUCTURE ==="</span>)
<span class="code-keyword">print</span>(<span class="code-tooltip" data-tip="DF.INFO(): The most important inspection command! Shows: (1) data types for each column (object=text, int64=whole numbers, float64=decimals), (2) how many non-null values exist (reveals missing data), (3) memory usage. Run this FIRST on every dataset.">df.info()</span>)

<span class="code-comment"># head() shows first rows - always visually inspect!</span>
<span class="code-comment"># Default is 5 rows, but you can specify: head(10)</span>
<span class="code-keyword">print</span>(<span class="code-string">"\n=== FIRST 5 ROWS ==="</span>)
<span class="code-keyword">print</span>(<span class="code-tooltip" data-tip="DF.HEAD(): Shows the first 5 rows of your data. Essential for visual inspection - you can spot obvious errors, see what values look like, and verify the data loaded correctly. Use head(10) to see more rows.">df.head()</span>)</code></pre>
            <button class="run-btn" data-lang="python">Run Code</button>
          </div>
          <div class="tab-content" data-lang="stata">
<pre><code><span class="code-comment">* Continuing - inspect structure</span>
<span class="code-comment">* Always check your data before analysis!</span>

<span class="code-comment">* Full variable description including type, format, labels</span>
<span class="code-tooltip" data-tip="DESCRIBE: Your data inspection command in Stata. Shows: variable names, storage types (str=text, int=integers, float/double=decimals), display formats, and any variable labels. Without 'short', shows all details for every variable."><span class="code-keyword">describe</span></span>

<span class="code-comment">* First observations - visual inspection is crucial</span>
<span class="code-tooltip" data-tip="LIST IN 1/5: Displays observations 1 through 5 in a table format. You can also specify variables: 'list countryname year in 1/5' shows only those columns. Essential for visually checking if data looks correct."><span class="code-keyword">list</span> in 1/5</span></code></pre>
            <button class="run-btn" data-lang="stata">Run Code</button>
          </div>
          <div class="tab-content" data-lang="r">
<pre><code><span class="code-comment"># Continuing - inspect structure</span>
<span class="code-comment"># Understanding structure prevents analysis mistakes</span>

<span class="code-comment"># str() shows structure: variable types, sample values</span>
<span class="code-comment"># This is R's equivalent of pandas info()</span>
<span class="code-tooltip" data-tip="STR(): Short for 'structure'. R's most important inspection function! Shows: object type (tibble, data.frame), dimensions, each column's data type (chr=text, num=numbers, int=integers), and sample values. Run this FIRST on any dataset."><span class="code-function">str</span>(df)</span>

<span class="code-comment"># head() shows first 6 rows by default</span>
<span class="code-tooltip" data-tip="HEAD(): Shows the first 6 rows of your data (R's default is 6, not 5 like Python). Use head(df, 10) to see more rows. Essential for visual inspection - catching obvious errors early."><span class="code-function">head</span>(df)</span></code></pre>
            <button class="run-btn" data-lang="r">Run Code</button>
          </div>
        </div>

        <!-- Output simulations for Step 2 -->
        <div class="output-simulation" data-output="inspect-1" data-lang="python">
          <div class="output-header">
            <span>Python Output</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body">=== DATA STRUCTURE ===
&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: <span class="out-num">14112</span> entries, 0 to 14111
Data columns (total 4 columns):
 #   Column        Non-Null Count  Dtype
---  ------        --------------  -----
 0   Country Name  <span class="out-num">14112</span> non-null  <span class="out-blue">object</span>
 1   Country Code  <span class="out-num">14112</span> non-null  <span class="out-blue">object</span>
 2   Year          <span class="out-num">14112</span> non-null  <span class="out-blue">int64</span>
 3   Value         <span class="out-num">10585</span> non-null  <span class="out-blue">float64</span>

=== FIRST 5 ROWS ===
   Country Name Country Code  Year         Value
0    Arab World          ARB  1968  2.576068e+10
1    Arab World          ARB  1969  2.843420e+10
2    Arab World          ARB  1970  3.138565e+10
3    Arab World          ARB  1971  3.587548e+10
4    Arab World          ARB  1972  4.250944e+10</div>
        </div>

        <div class="output-simulation" data-output="inspect-1" data-lang="stata">
          <div class="output-header">
            <span>Stata Output</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body"><span class="out-str">. describe</span>

Contains data
 Observations:        <span class="out-num">14,112</span>
    Variables:             <span class="out-num">4</span>

Variable      Storage   Display    Value
    name         type    format    label
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
countryname     <span class="out-blue">str52</span>   %52s
countrycode     <span class="out-blue">str3</span>    %9s
year            <span class="out-blue">int</span>     %10.0g
value           <span class="out-blue">double</span>  %10.0g

<span class="out-str">. list in 1/5</span>

     +--------------------------------------------------+
     |    countryname   countrycode   year        value |
     |--------------------------------------------------|
  1. |     Arab World           ARB   1968   2.5761e+10 |
  2. |     Arab World           ARB   1969   2.8434e+10 |
  3. |     Arab World           ARB   1970   3.1386e+10 |
  4. |     Arab World           ARB   1971   3.5875e+10 |
  5. |     Arab World           ARB   1972   4.2509e+10 |
     +--------------------------------------------------+</div>
        </div>

        <div class="output-simulation" data-output="inspect-1" data-lang="r">
          <div class="output-header">
            <span>R Output (RStudio Console)</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body"><span class="out-str">&gt; str(df)</span>
tibble [14,112 x 4] (S3: tbl_df/tbl/data.frame)
 $ Country Name: <span class="out-blue">chr</span>  "Arab World" "Arab World" "Arab World" ...
 $ Country Code: <span class="out-blue">chr</span>  "ARB" "ARB" "ARB" "ARB" ...
 $ Year        : <span class="out-blue">num</span>  1968 1969 1970 1971 1972 ...
 $ Value       : <span class="out-blue">num</span>  2.58e+10 2.84e+10 3.14e+10 3.59e+10 4.25e+10 ...

<span class="out-str">&gt; head(df)</span>
<span class="out-green"># A tibble: 6 x 4</span>
  `Country Name` `Country Code`  Year        Value
  <span class="out-blue">&lt;chr&gt;</span>          <span class="out-blue">&lt;chr&gt;</span>          <span class="out-blue">&lt;dbl&gt;</span>        <span class="out-blue">&lt;dbl&gt;</span>
<span class="out-num">1</span> Arab World     ARB             1968  25760680000
<span class="out-num">2</span> Arab World     ARB             1969  28434200000
<span class="out-num">3</span> Arab World     ARB             1970  31385650000
<span class="out-num">4</span> Arab World     ARB             1971  35875480000
<span class="out-num">5</span> Arab World     ARB             1972  42509440000
<span class="out-num">6</span> Arab World     ARB             1973  54832410000</div>
        </div>

        <!-- STEP 3: Summary Statistics -->
        <h2>Step 3: Summary Statistics</h2>

        <p>Now we calculate key statistics to understand our data's distribution and identify potential issues.</p>

        <div class="code-tabs" data-runnable="summary-1">
          <div class="tab-buttons">
            <button class="tab-button active" data-lang="python">Python</button>
            <button class="tab-button" data-lang="stata">Stata</button>
            <button class="tab-button" data-lang="r">R</button>
          </div>
          <div class="tab-content active" data-lang="python">
<pre><code><span class="code-comment"># Summary statistics - understand your distributions</span>

<span class="code-comment"># describe() gives count, mean, std, min, 25%, 50%, 75%, max</span>
<span class="code-comment"># Only works on numeric columns by default</span>
<span class="code-keyword">print</span>(<span class="code-string">"=== SUMMARY STATISTICS ==="</span>)
<span class="code-keyword">print</span>(<span class="code-tooltip" data-tip="DF.DESCRIBE(): Computes summary statistics for all numeric columns. Shows: count (non-missing values), mean (average), std (standard deviation - how spread out values are), min, 25%/50%/75% (quartiles - values that split data into quarters), max. Use describe(include='all') to also see text columns.">df.describe()</span>)

<span class="code-comment"># Missing values analysis - CRITICAL for research!</span>
<span class="code-comment"># isnull() returns True/False, sum() counts True values</span>
<span class="code-keyword">print</span>(<span class="code-string">"\n=== MISSING VALUES ==="</span>)
<span class="code-tooltip" data-tip="DF.ISNULL().SUM(): Two functions chained together! isnull() marks each cell as True (missing) or False (has value). sum() counts the True values. Result: count of missing values per column.">missing</span> = <span class="code-tooltip" data-tip="ISNULL(): Returns a DataFrame of True/False values. True means the cell is empty (NaN/null/missing). Essential for finding gaps in your data.">df.isnull()</span><span class="code-tooltip" data-tip="SUM(): When applied to True/False values, counts the True values (True=1, False=0). Here it counts missing values in each column.">.sum()</span>
<span class="code-tooltip" data-tip="PERCENTAGE CALCULATION: Divides missing count by total rows, multiplies by 100 for percentage, rounds to 1 decimal. Helps you understand severity - 1% missing is different from 50% missing!">missing_pct</span> = (missing / <span class="code-tooltip" data-tip="LEN(DF): Total number of rows in the DataFrame. Used as denominator to calculate what fraction of data is missing.">len(df)</span> * <span class="code-number">100</span>)<span class="code-tooltip" data-tip="ROUND(1): Rounds numbers to 1 decimal place. Makes percentages easier to read (25.0 instead of 24.9893...).">.round(<span class="code-number">1</span>)</span>
<span class="code-keyword">print</span>(<span class="code-tooltip" data-tip="PD.DATAFRAME(): Creates a new DataFrame from a dictionary. Each key becomes a column name, each value becomes the column's data. Here we combine missing counts and percentages into one nice table.">pd.DataFrame({<span class="code-string">'Missing'</span>: missing, <span class="code-string">'Percent'</span>: missing_pct})</span>)</code></pre>
            <button class="run-btn" data-lang="python">Run Code</button>
          </div>
          <div class="tab-content" data-lang="stata">
<pre><code><span class="code-comment">* Summary statistics</span>
<span class="code-comment">* 'detail' option gives more info: percentiles, skewness, kurtosis</span>
<span class="code-tooltip" data-tip="SUMMARIZE, DETAIL: Stata's main command for descriptive statistics. Shows: mean (average), standard deviation (spread), min/max values. The 'detail' option adds percentiles (1%, 5%, 10%, 25%, 50%, 75%, 90%, 95%, 99%), skewness (asymmetry), and kurtosis (tail heaviness)."><span class="code-keyword">summarize</span>, detail</span>

<span class="code-comment">* Missing values analysis</span>
<span class="code-comment">* misstable shows patterns of missing data</span>
<span class="code-tooltip" data-tip="MISSTABLE SUMMARIZE: Analyzes missing data patterns. Shows which variables have missing values, how many observations are affected, and what percentage of data is missing. Critical for understanding data quality before analysis."><span class="code-keyword">misstable</span> summarize</span></code></pre>
            <button class="run-btn" data-lang="stata">Run Code</button>
          </div>
          <div class="tab-content" data-lang="r">
<pre><code><span class="code-comment"># Summary statistics</span>
<span class="code-comment"># summary() gives min, 1st quartile, median, mean, 3rd quartile, max</span>
<span class="code-tooltip" data-tip="SUMMARY(): R's all-in-one summary function. For numeric columns: shows min, 1st quartile (25%), median (50%), mean, 3rd quartile (75%), max, and NA count. For text columns: shows frequency counts. Quick way to understand your entire dataset."><span class="code-function">summary</span>(df)</span>

<span class="code-comment"># Missing values count per column</span>
<span class="code-comment"># is.na() returns TRUE/FALSE, colSums() sums each column</span>
<span class="code-function">cat</span>(<span class="code-string">"\nMissing values:\n"</span>)
<span class="code-tooltip" data-tip="COLSUMS(IS.NA(DF)): Two functions working together! is.na(df) creates a True/False matrix (True = missing). colSums() adds up each column. Result: count of missing values per variable. Essential for data quality assessment."><span class="code-function">colSums</span>(<span class="code-tooltip" data-tip="IS.NA(): Tests each cell for missing values (NA in R). Returns TRUE if missing, FALSE if present. Works on vectors, data frames, or any R object."><span class="code-function">is.na</span>(df)</span>)</span></code></pre>
            <button class="run-btn" data-lang="r">Run Code</button>
          </div>
        </div>

        <!-- Output simulations for Step 3 -->
        <div class="output-simulation" data-output="summary-1" data-lang="python">
          <div class="output-header">
            <span>Python Output</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body">=== SUMMARY STATISTICS ===
               Year         Value
count  <span class="out-num">14112.00</span>  <span class="out-num">10585.00</span>
mean    <span class="out-num">1993.50</span>  <span class="out-num">3.21e+11</span>
std       <span class="out-num">15.59</span>  <span class="out-num">1.42e+12</span>
min     <span class="out-num">1960.00</span>  <span class="out-num">2.69e+06</span>
25%     <span class="out-num">1976.75</span>  <span class="out-num">2.23e+09</span>
50%     <span class="out-num">1993.50</span>  <span class="out-num">1.45e+10</span>
75%     <span class="out-num">2010.25</span>  <span class="out-num">9.89e+10</span>
max     <span class="out-num">2027.00</span>  <span class="out-num">2.55e+13</span>

=== MISSING VALUES ===
              Missing  Percent
Country Name        0      0.0
Country Code        0      0.0
Year                0      0.0
Value            <span class="out-yellow">3527</span>     <span class="out-yellow">25.0</span></div>
        </div>

        <div class="output-simulation" data-output="summary-1" data-lang="stata">
          <div class="output-header">
            <span>Stata Output</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body"><span class="out-str">. summarize, detail</span>

                            year
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      Percentiles      Smallest
 1%         1968           1960
 5%         1970           1960
10%         1972           1960       Obs          <span class="out-num">14,112</span>
25%         1977           1960       Sum of wgt.  <span class="out-num">14,112</span>

50%         1994                      Mean         <span class="out-num">1993.5</span>
                        Largest       Std. dev.    <span class="out-num">15.589</span>
75%         2010           2027
90%         2016           2027       Variance     <span class="out-num">243.02</span>
95%         2019           2027       Skewness     <span class="out-num">0</span>
99%         2024           2027       Kurtosis     <span class="out-num">1.8</span>

<span class="out-str">. misstable summarize</span>

                                               Obs<.
                                             ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
               Obs.   Variable        Unique
             missing   name           values   Min   Max
         ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
           <span class="out-yellow">3,527</span>    value            10585    .      .</div>
        </div>

        <div class="output-simulation" data-output="summary-1" data-lang="r">
          <div class="output-header">
            <span>R Output (RStudio Console)</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body"><span class="out-str">&gt; summary(df)</span>
 Country Name       Country Code            Year           Value
 Length:14112       Length:14112       Min.   :1960   Min.   :2.69e+06
 Class :character   Class :character   1st Qu.:1977   1st Qu.:2.23e+09
 Mode  :character   Mode  :character   Median :1994   Median :1.45e+10
                                       Mean   :1994   Mean   :3.21e+11
                                       3rd Qu.:2010   3rd Qu.:9.89e+10
                                       Max.   :2027   Max.   :2.55e+13
                                                      <span class="out-yellow">NA's   :3527</span>

Missing values:
Country Name Country Code         Year        Value
           0            0            0         <span class="out-yellow">3527</span></div>
        </div>

        <div class="info-box note">
          <div class="info-box-title">Red Flag Detected!</div>
          <p style="margin-bottom: 0;">25% of GDP values are missing. Before any analysis, we need to understand <em>why</em>. Are they missing for small countries? Recent years? This is exactly what the "First Analysis" approach catches early.</p>
        </div>

        <!-- STEP 4 & 5: Visualization and Correlation -->
        <h2>Step 4-5: Visualization & Correlations</h2>

        <p>Visual inspection reveals patterns that summary statistics miss. Before any analysis, you should explore: <strong>distributions</strong> (histograms, density plots), <strong>outliers</strong> (box plots), <strong>relationships</strong> (scatter plots), and <strong>correlations</strong> (heatmaps).</p>

        <div class="code-tabs" data-runnable="viz-1">
          <div class="tab-buttons">
            <button class="tab-button active" data-lang="python">Python</button>
            <button class="tab-button" data-lang="stata">Stata</button>
            <button class="tab-button" data-lang="r">R</button>
          </div>
          <div class="tab-content active" data-lang="python">
<pre><code><span class="code-comment"># Import visualization libraries</span>
<span class="code-keyword">import</span> matplotlib.pyplot <span class="code-keyword">as</span> plt
<span class="code-keyword">import</span> seaborn <span class="code-keyword">as</span> sns
<span class="code-keyword">import</span> numpy <span class="code-keyword">as</span> np

<span class="code-comment"># Scale GDP to billions and log-transform for better visualization</span>
<span class="code-tooltip" data-tip="COPY(): Creates an independent copy of the DataFrame. Without copy(), changes to df_viz would also change df. Always use copy() when creating modified versions for plotting.">df_viz</span> = df.copy()
<span class="code-tooltip" data-tip="CREATING NEW COLUMN: df['new_col'] = ... adds a new column. Here we scale GDP to billions by dividing by 1e9 (1 billion). Makes numbers more readable.">df_viz[<span class="code-string">'GDP_billions'</span>]</span> = df_viz[<span class="code-string">'Value'</span>] / <span class="code-number">1e9</span>
<span class="code-tooltip" data-tip="LOG TRANSFORM: np.log10() computes log base 10. Log transforms help visualize right-skewed data (like GDP) by compressing large values. A country with GDP of $1 trillion shows as 3 (log10 of 1000).">df_viz[<span class="code-string">'log_GDP'</span>]</span> = np.log10(df_viz[<span class="code-string">'Value'</span>].replace(<span class="code-number">0</span>, np.nan))

<span class="code-comment"># Set up a 2x2 figure for multiple plots</span>
<span class="code-tooltip" data-tip="PLT.SUBPLOTS(): Creates a figure with multiple plots arranged in a grid. (2,2) means 2 rows x 2 columns = 4 subplots. Returns the figure object and an array of axes (individual plot areas).">fig, axes</span> = plt.subplots(<span class="code-number">2</span>, <span class="code-number">2</span>, figsize=(<span class="code-number">12</span>, <span class="code-number">10</span>))

<span class="code-comment"># 1. HISTOGRAM WITH DENSITY - Distribution shape</span>
<span class="code-tooltip" data-tip="SNS.HISTPLOT(): Seaborn's histogram with optional density curve. kde=True adds a smooth kernel density estimate line showing the underlying distribution shape. Better than plt.hist() for exploration.">sns.histplot</span>(df_viz[<span class="code-string">'log_GDP'</span>].dropna(), <span class="code-tooltip" data-tip="KDE=TRUE: Adds a Kernel Density Estimate - a smooth curve showing the probability distribution. Helps see the shape beyond the histogram bars.">kde=<span class="code-keyword">True</span></span>, bins=<span class="code-number">40</span>, ax=axes[<span class="code-number">0</span>,<span class="code-number">0</span>])
axes[<span class="code-number">0</span>,<span class="code-number">0</span>].set_xlabel(<span class="code-string">'Log10(GDP in USD)'</span>)
axes[<span class="code-number">0</span>,<span class="code-number">0</span>].set_title(<span class="code-string">'Distribution of GDP (log scale)'</span>)

<span class="code-comment"># 2. BOX PLOT BY DECADE - Outliers and spread over time</span>
<span class="code-tooltip" data-tip="INTEGER DIVISION //: df['Year']//10*10 rounds years down to decades. 1987//10=198, 198*10=1980. Groups years into decades for comparison.">df_viz[<span class="code-string">'Decade'</span>]</span> = (df_viz[<span class="code-string">'Year'</span>] // <span class="code-number">10</span>) * <span class="code-number">10</span>
<span class="code-tooltip" data-tip="SNS.BOXPLOT(): Shows distribution summary: median (line), IQR (box), whiskers (typical range), and outliers (dots). x= groups data, y= is the value. Great for comparing distributions across categories.">sns.boxplot</span>(data=df_viz, x=<span class="code-string">'Decade'</span>, y=<span class="code-string">'log_GDP'</span>, ax=axes[<span class="code-number">0</span>,<span class="code-number">1</span>])
axes[<span class="code-number">0</span>,<span class="code-number">1</span>].set_ylabel(<span class="code-string">'Log10(GDP)'</span>)
axes[<span class="code-number">0</span>,<span class="code-number">1</span>].set_title(<span class="code-string">'GDP Distribution by Decade'</span>)
axes[<span class="code-number">0</span>,<span class="code-number">1</span>].tick_params(axis=<span class="code-string">'x'</span>, rotation=<span class="code-number">45</span>)

<span class="code-comment"># 3. TIME SERIES - Trends for selected countries</span>
countries = [<span class="code-string">'USA'</span>, <span class="code-string">'CHN'</span>, <span class="code-string">'DEU'</span>, <span class="code-string">'BRA'</span>, <span class="code-string">'IND'</span>]
subset = df_viz[df_viz[<span class="code-string">'Country Code'</span>].isin(countries)]
<span class="code-keyword">for</span> country <span class="code-keyword">in</span> countries:
    data = subset[subset[<span class="code-string">'Country Code'</span>] == country]
    axes[<span class="code-number">1</span>,<span class="code-number">0</span>].plot(data[<span class="code-string">'Year'</span>], data[<span class="code-string">'GDP_billions'</span>], label=country, linewidth=<span class="code-number">2</span>)
axes[<span class="code-number">1</span>,<span class="code-number">0</span>].set_xlabel(<span class="code-string">'Year'</span>)
axes[<span class="code-number">1</span>,<span class="code-number">0</span>].set_ylabel(<span class="code-string">'GDP (Billion USD)'</span>)
axes[<span class="code-number">1</span>,<span class="code-number">0</span>].legend()
axes[<span class="code-number">1</span>,<span class="code-number">0</span>].set_title(<span class="code-string">'GDP Trends: Major Economies'</span>)

<span class="code-comment"># 4. SCATTER PLOT - Year vs GDP to see global patterns</span>
<span class="code-tooltip" data-tip="SNS.SCATTERPLOT(): Creates scatter plots with optional grouping by color/size. alpha= controls transparency (0-1), making overlapping points visible. Essential for spotting relationships.">sns.scatterplot</span>(data=df_viz.dropna(), x=<span class="code-string">'Year'</span>, y=<span class="code-string">'log_GDP'</span>,
                <span class="code-tooltip" data-tip="ALPHA=0.3: Sets transparency. 0=invisible, 1=solid. Low alpha reveals density - darker areas have more overlapping points.">alpha=<span class="code-number">0.3</span></span>, s=<span class="code-number">10</span>, ax=axes[<span class="code-number">1</span>,<span class="code-number">1</span>])
axes[<span class="code-number">1</span>,<span class="code-number">1</span>].set_ylabel(<span class="code-string">'Log10(GDP)'</span>)
axes[<span class="code-number">1</span>,<span class="code-number">1</span>].set_title(<span class="code-string">'All Countries: GDP Over Time'</span>)

plt.tight_layout()
plt.show()

<span class="code-comment"># 5. DENSITY PLOT - Compare distributions across time periods</span>
fig, ax = plt.subplots(figsize=(<span class="code-number">10</span>, <span class="code-number">5</span>))
<span class="code-keyword">for</span> decade <span class="code-keyword">in</span> [<span class="code-number">1980</span>, <span class="code-number">2000</span>, <span class="code-number">2020</span>]:
    data = df_viz[(df_viz[<span class="code-string">'Decade'</span>] == decade) & (df_viz[<span class="code-string">'log_GDP'</span>].notna())]
    <span class="code-tooltip" data-tip="SNS.KDEPLOT(): Draws a smooth density curve (kernel density estimate). Shows where values concentrate. Multiple kde curves let you compare distributions across groups.">sns.kdeplot</span>(data[<span class="code-string">'log_GDP'</span>], label=<span class="code-string">f'{decade}s'</span>, linewidth=<span class="code-number">2</span>)
ax.set_xlabel(<span class="code-string">'Log10(GDP)'</span>)
ax.set_title(<span class="code-string">'GDP Distribution Shift Over Decades'</span>)
ax.legend(title=<span class="code-string">'Decade'</span>)
plt.show()</code></pre>
            <button class="run-btn" data-lang="python">Run Code</button>
          </div>
          <div class="tab-content" data-lang="stata">
<pre><code><span class="code-comment">* Scale GDP and create log transform</span>
<span class="code-tooltip" data-tip="GEN (GENERATE): Creates a new variable. Here we scale GDP to billions by dividing by 1e9 (1 billion)."><span class="code-keyword">gen</span></span> gdp_billions = value / 1e9
<span class="code-tooltip" data-tip="LOG10(): Computes logarithm base 10. Log transforms help visualize right-skewed data like GDP. Stata's log10() handles missing values automatically."><span class="code-keyword">gen</span></span> log_gdp = log10(value)
<span class="code-tooltip" data-tip="INTEGER DIVISION: int(year/10)*10 rounds years to decades. int() truncates decimals, so 1987/10=198.7 becomes 198, then *10=1980."><span class="code-keyword">gen</span></span> decade = int(year/10)*10

<span class="code-comment">* 1. HISTOGRAM WITH DENSITY OVERLAY</span>
<span class="code-tooltip" data-tip="HISTOGRAM WITH KDENSITY: The kdensity option overlays a smooth density curve on the histogram. Shows distribution shape beyond the bars."><span class="code-keyword">histogram</span></span> log_gdp, <span class="code-tooltip" data-tip="KDENSITY: Adds a kernel density estimate curve - a smooth line showing probability distribution.">kdensity</span> frequency ///
    title(<span class="code-string">"Distribution of GDP (log scale)"</span>) ///
    xtitle(<span class="code-string">"Log10(GDP in USD)"</span>)

<span class="code-comment">* 2. BOX PLOT BY DECADE - Shows outliers and spread</span>
<span class="code-tooltip" data-tip="GRAPH BOX: Creates box plots showing median, quartiles, and outliers. 'over(decade)' creates separate boxes for each decade."><span class="code-keyword">graph box</span></span> log_gdp, <span class="code-tooltip" data-tip="OVER(): Groups data by a categorical variable. Each unique value gets its own box plot.">over(decade)</span> ///
    title(<span class="code-string">"GDP Distribution by Decade"</span>) ///
    ytitle(<span class="code-string">"Log10(GDP)"</span>) ///
    <span class="code-tooltip" data-tip="NOOUTSIDES: Suppresses extreme outliers from display. Use cautiously - outliers may be important! Remove this option to see all outliers.">nooutsides</span>

<span class="code-comment">* 3. TIME SERIES FOR SELECTED COUNTRIES</span>
<span class="code-keyword">twoway</span> (line gdp_billions year if countrycode == <span class="code-string">"USA"</span>, lwidth(medium)) ///
       (line gdp_billions year if countrycode == <span class="code-string">"CHN"</span>, lwidth(medium)) ///
       (line gdp_billions year if countrycode == <span class="code-string">"DEU"</span>, lwidth(medium)) ///
       (line gdp_billions year if countrycode == <span class="code-string">"BRA"</span>, lwidth(medium)) ///
       (line gdp_billions year if countrycode == <span class="code-string">"IND"</span>, lwidth(medium)), ///
       legend(label(1 <span class="code-string">"USA"</span>) label(2 <span class="code-string">"China"</span>) label(3 <span class="code-string">"Germany"</span>) ///
              label(4 <span class="code-string">"Brazil"</span>) label(5 <span class="code-string">"India"</span>)) ///
       title(<span class="code-string">"GDP Trends: Major Economies"</span>) ///
       ytitle(<span class="code-string">"GDP (Billion USD)"</span>) xtitle(<span class="code-string">"Year"</span>)

<span class="code-comment">* 4. SCATTER PLOT - All countries over time</span>
<span class="code-tooltip" data-tip="SCATTER: Creates scatter plots. 'jitter(2)' adds small random noise to prevent overplotting. 'msize(tiny)' makes points small so patterns emerge."><span class="code-keyword">scatter</span></span> log_gdp year, <span class="code-tooltip" data-tip="MSIZE(TINY): Sets marker size. Options: tiny, vsmall, small, medium, large. Small sizes help when you have many points.">msize(tiny)</span> <span class="code-tooltip" data-tip="MCOLOR(%30): Sets marker transparency. %30 means 30% opaque. Reveals density - darker areas have more overlapping points.">mcolor(%30)</span> ///
    title(<span class="code-string">"All Countries: GDP Over Time"</span>) ///
    ytitle(<span class="code-string">"Log10(GDP)"</span>) xtitle(<span class="code-string">"Year"</span>)

<span class="code-comment">* 5. DENSITY COMPARISON ACROSS DECADES</span>
<span class="code-tooltip" data-tip="TWOWAY KDENSITY: Draws kernel density curves. Combining multiple kdensity plots lets you compare distributions across groups."><span class="code-keyword">twoway</span></span> (kdensity log_gdp if decade == 1980, lwidth(medium)) ///
       (kdensity log_gdp if decade == 2000, lwidth(medium)) ///
       (kdensity log_gdp if decade == 2020, lwidth(medium)), ///
       legend(label(1 <span class="code-string">"1980s"</span>) label(2 <span class="code-string">"2000s"</span>) label(3 <span class="code-string">"2020s"</span>)) ///
       title(<span class="code-string">"GDP Distribution Shift Over Decades"</span>) ///
       xtitle(<span class="code-string">"Log10(GDP)"</span>) ytitle(<span class="code-string">"Density"</span>)</code></pre>
            <button class="run-btn" data-lang="stata">Run Code</button>
          </div>
          <div class="tab-content" data-lang="r">
<pre><code><span class="code-comment"># Load required libraries</span>
<span class="code-function">library</span>(tidyverse)  <span class="code-comment"># includes ggplot2, dplyr</span>
<span class="code-function">library</span>(patchwork)  <span class="code-comment"># for combining plots</span>

<span class="code-comment"># Prepare data with transformations</span>
df_viz <- df <span class="code-tooltip" data-tip="PIPE OPERATOR %>%: Passes data from left to right. Read as 'then'. Makes code read like a recipe: take df, THEN mutate it, THEN filter it, etc.">%>%</span>
  <span class="code-tooltip" data-tip="MUTATE(): Adds or modifies columns in a data frame. Can create multiple columns at once, separated by commas."><span class="code-function">mutate</span></span>(
    GDP_billions = Value / 1e9,
    <span class="code-tooltip" data-tip="LOG10(): Base-10 logarithm. Log transforms compress right-skewed data. A GDP of $1 trillion becomes log10(1e12) = 12.">log_GDP</span> = log10(Value),
    <span class="code-tooltip" data-tip="INTEGER DIVISION %/%: R's integer division operator. year %/% 10 gives the decade digit (198 for 1987), then *10 gives 1980.">Decade</span> = (Year %/% 10) * 10
  )

<span class="code-comment"># 1. HISTOGRAM WITH DENSITY - Distribution shape</span>
p1 <- <span class="code-function">ggplot</span>(df_viz, <span class="code-function">aes</span>(x = log_GDP)) +
  <span class="code-tooltip" data-tip="GEOM_HISTOGRAM(): Creates histogram bars. aes(y = after_stat(density)) scales y-axis to density (area=1) so we can overlay a density curve."><span class="code-function">geom_histogram</span></span>(<span class="code-function">aes</span>(y = after_stat(density)), bins = 40,
                   fill = <span class="code-string">"steelblue"</span>, alpha = 0.7) +
  <span class="code-tooltip" data-tip="GEOM_DENSITY(): Adds a smooth kernel density curve. Shows the underlying distribution shape. color= sets line color, linewidth= sets thickness."><span class="code-function">geom_density</span></span>(color = <span class="code-string">"darkred"</span>, linewidth = 1) +
  <span class="code-function">labs</span>(x = <span class="code-string">"Log10(GDP in USD)"</span>, y = <span class="code-string">"Density"</span>,
       title = <span class="code-string">"Distribution of GDP (log scale)"</span>)

<span class="code-comment"># 2. BOX PLOT BY DECADE - Outliers and spread over time</span>
p2 <- df_viz %>%
  <span class="code-function">filter</span>(!is.na(log_GDP)) %>%
  <span class="code-function">ggplot</span>(<span class="code-function">aes</span>(x = <span class="code-function">factor</span>(Decade), y = log_GDP)) +
  <span class="code-tooltip" data-tip="GEOM_BOXPLOT(): Creates box plots showing median (line), IQR (box), whiskers (1.5*IQR), and outliers (points). fill= sets box color."><span class="code-function">geom_boxplot</span></span>(fill = <span class="code-string">"lightblue"</span>, outlier.alpha = 0.3) +
  <span class="code-function">labs</span>(x = <span class="code-string">"Decade"</span>, y = <span class="code-string">"Log10(GDP)"</span>,
       title = <span class="code-string">"GDP Distribution by Decade"</span>)

<span class="code-comment"># 3. TIME SERIES - Trends for selected countries</span>
countries <- <span class="code-function">c</span>(<span class="code-string">"USA"</span>, <span class="code-string">"CHN"</span>, <span class="code-string">"DEU"</span>, <span class="code-string">"BRA"</span>, <span class="code-string">"IND"</span>)
p3 <- df_viz %>%
  <span class="code-function">filter</span>(`Country Code` %in% countries) %>%
  <span class="code-function">ggplot</span>(<span class="code-function">aes</span>(x = Year, y = GDP_billions, color = `Country Code`)) +
  <span class="code-tooltip" data-tip="GEOM_LINE(): Draws connected lines. When color= is mapped to a variable, ggplot automatically creates separate colored lines for each group."><span class="code-function">geom_line</span></span>(linewidth = 1.2) +
  <span class="code-function">labs</span>(y = <span class="code-string">"GDP (Billion USD)"</span>, title = <span class="code-string">"GDP Trends: Major Economies"</span>)

<span class="code-comment"># 4. SCATTER PLOT - Year vs GDP to see global patterns</span>
p4 <- df_viz %>%
  <span class="code-function">filter</span>(!is.na(log_GDP)) %>%
  <span class="code-function">ggplot</span>(<span class="code-function">aes</span>(x = Year, y = log_GDP)) +
  <span class="code-tooltip" data-tip="GEOM_POINT(): Adds points to the plot. alpha= controls transparency (0-1). Low alpha reveals density where points overlap."><span class="code-function">geom_point</span></span>(alpha = 0.2, size = 0.8) +
  <span class="code-function">labs</span>(y = <span class="code-string">"Log10(GDP)"</span>, title = <span class="code-string">"All Countries: GDP Over Time"</span>)

<span class="code-comment"># Combine plots in a 2x2 grid using patchwork</span>
<span class="code-tooltip" data-tip="PATCHWORK SYNTAX: The + combines plots, and plot_layout() arranges them. ncol=2 creates a 2-column grid. Patchwork makes multi-panel figures easy.">(p1 + p2) / (p3 + p4)</span>

<span class="code-comment"># 5. DENSITY COMPARISON ACROSS DECADES</span>
df_viz %>%
  <span class="code-function">filter</span>(Decade %in% <span class="code-function">c</span>(1980, 2000, 2020), !is.na(log_GDP)) %>%
  <span class="code-function">ggplot</span>(<span class="code-function">aes</span>(x = log_GDP, color = <span class="code-function">factor</span>(Decade))) +
  <span class="code-tooltip" data-tip="GEOM_DENSITY(): When color= is mapped to a grouping variable, creates separate density curves for each group. Perfect for comparing distributions."><span class="code-function">geom_density</span></span>(linewidth = 1.2) +
  <span class="code-function">labs</span>(x = <span class="code-string">"Log10(GDP)"</span>, y = <span class="code-string">"Density"</span>, color = <span class="code-string">"Decade"</span>,
       title = <span class="code-string">"GDP Distribution Shift Over Decades"</span>)</code></pre>
            <button class="run-btn" data-lang="r">Run Code</button>
          </div>
        </div>

        <!-- Output simulations for Step 4-5 -->
        <div class="output-simulation" data-output="viz-1" data-lang="python">
          <div class="output-header">
            <span>Python Output (Matplotlib/Seaborn)</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body">
<span class="out-green">‚ïê‚ïê‚ïê 2x2 Panel: Exploratory Visualizations ‚ïê‚ïê‚ïê</span>

<span class="out-blue">‚îå‚îÄ 1. Distribution (log scale) ‚îÄ‚îê  ‚îå‚îÄ 2. Box Plot by Decade ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span>
‚îÇ Density                        ‚îÇ  ‚îÇ Log10(GDP)                   ‚îÇ
‚îÇ 0.4‚îÇ       <span class="out-yellow">‚ñÑ‚ñÑ‚ñÑ</span>                  ‚îÇ  ‚îÇ    13‚îÇ    ‚óã    ‚óã  ‚óã  <span class="out-yellow">‚óã</span>  ‚óã    ‚îÇ
‚îÇ    ‚îÇ      <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà</span>                 ‚îÇ  ‚îÇ      ‚îÇ  ‚î¨‚îÄ‚î¥‚îÄ‚î¨ ‚î¨‚î¥‚î¨ ‚î¨‚î¥‚î¨ <span class="out-yellow">‚î¨‚î¥‚î¨</span> ‚î¨‚î¥‚î¨  ‚îÇ
‚îÇ 0.3‚îÇ     <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>  <span class="out-str">‚îÄdensity</span>     ‚îÇ  ‚îÇ    11‚îÇ  ‚îÇ   ‚îÇ ‚îÇ ‚îÇ ‚îÇ ‚îÇ <span class="out-yellow">‚îÇ ‚îÇ</span> ‚îÇ ‚îÇ  ‚îÇ
‚îÇ    ‚îÇ    <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>              ‚îÇ  ‚îÇ      ‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚î§ ‚îú‚îÄ‚î§ <span class="out-yellow">‚îú‚îÄ‚î§</span> ‚îú‚îÄ‚î§  ‚îÇ
‚îÇ 0.2‚îÇ   <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>             ‚îÇ  ‚îÇ     9‚îÇ  ‚îî‚îÄ‚î¨‚îÄ‚îò ‚îî‚î¨‚îò ‚îî‚î¨‚îò <span class="out-yellow">‚îî‚î¨‚îò</span> ‚îî‚î¨‚îò  ‚îÇ
‚îÇ    ‚îÇ  <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>            ‚îÇ  ‚îÇ      ‚îÇ    ‚îÇ    ‚îÇ   ‚îÇ   <span class="out-yellow">‚îÇ</span>   ‚îÇ   ‚îÇ
‚îÇ 0.1‚îÇ <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñÑ</span>‚ñÉ‚ñÇ‚ñÅ       ‚îÇ  ‚îÇ     7‚îÇ  ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ  ‚îÇ   ‚îÇ   <span class="out-yellow">‚îÇ</span>   ‚îÇ   ‚îÇ
‚îÇ   0‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÇ  ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ    7   8   9  10  11  12  13   ‚îÇ  ‚îÇ     1970 1980 1990 2000 2020 ‚îÇ
‚îÇ      Log10(GDP in USD)         ‚îÇ  ‚îÇ           Decade             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

<span class="out-blue">‚îå‚îÄ 3. GDP Trends: Major Economies‚îê  ‚îå‚îÄ 4. All Countries Over Time ‚îÄ‚îê</span>
‚îÇ GDP (Billion $)                ‚îÇ  ‚îÇ Log10(GDP)                   ‚îÇ
‚îÇ25000‚îÇ              <span class="out-blue">‚ï±‚îÄ‚îÄUSA</span>      ‚îÇ  ‚îÇ    13‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà</span>      ‚îÇ
‚îÇ     ‚îÇ            <span class="out-blue">‚ï±</span>            ‚îÇ  ‚îÇ      ‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà</span>      ‚îÇ
‚îÇ20000‚îÇ          <span class="out-blue">‚ï±</span>   <span class="out-yellow">‚ï±‚îÄ‚îÄCHN</span>     ‚îÇ  ‚îÇ    11‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà</span>      ‚îÇ
‚îÇ     ‚îÇ        <span class="out-blue">‚ï±</span>   <span class="out-yellow">‚ï±</span>             ‚îÇ  ‚îÇ      ‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>      ‚îÇ
‚îÇ15000‚îÇ      <span class="out-blue">‚ï±</span>  <span class="out-yellow">‚ï±</span>                ‚îÇ  ‚îÇ     9‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>      ‚îÇ
‚îÇ     ‚îÇ    <span class="out-blue">‚ï±</span> <span class="out-yellow">‚ï±</span>                  ‚îÇ  ‚îÇ      ‚îÇ<span class="out-yellow">‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>      ‚îÇ
‚îÇ10000‚îÇ  <span class="out-blue">‚ï±</span><span class="out-yellow">‚ï±</span>                    ‚îÇ  ‚îÇ     7‚îÇ<span class="out-yellow">‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>      ‚îÇ
‚îÇ     ‚îÇ<span class="out-blue">‚ï±</span><span class="out-yellow">‚ï±</span>    <span class="out-green">‚îÄ‚îÄ‚îÄDEU</span>  <span class="out-str">‚îÄ‚îÄ‚îÄBRA</span>     ‚îÇ  ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ 5000‚îÇ___<span class="out-green">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span><span class="out-str">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>‚îÄ<span class="out-num">IND</span>     ‚îÇ  ‚îÇ     1970  1990  2010  2025  ‚îÇ
‚îÇ    0‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ  ‚îÇ           Year               ‚îÇ
‚îÇ    1960  1980  2000   2020     ‚îÇ  ‚îÇ  <span class="out-str">darker = more observations</span>  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

<span class="out-green">‚ïê‚ïê‚ïê Density Comparison: GDP Distribution Shift ‚ïê‚ïê‚ïê</span>

Density
‚îÇ       <span class="out-str">1980s</span>   <span class="out-blue">2000s</span>   <span class="out-yellow">2020s</span>
‚îÇ         ‚îÇ       ‚îÇ        ‚îÇ
0.4‚îÇ       <span class="out-str">‚ñÑ</span>      <span class="out-blue">‚ñÑ</span>       <span class="out-yellow">‚ñÑ</span>
‚îÇ        <span class="out-str">‚ñà‚ñà‚ñà</span>   <span class="out-blue">‚ñà‚ñà‚ñà</span>    <span class="out-yellow">‚ñà‚ñà‚ñà</span>
0.3‚îÇ       <span class="out-str">‚ñà‚ñà‚ñà‚ñà</span> <span class="out-blue">‚ñà‚ñà‚ñà‚ñà‚ñà</span>  <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà</span>
‚îÇ        <span class="out-str">‚ñà‚ñà‚ñà‚ñà‚ñà</span><span class="out-blue">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span><span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>
0.2‚îÇ       <span class="out-str">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>
‚îÇ        <span class="out-str">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>
0.1‚îÇ      <span class="out-str">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>
‚îÇ       <span class="out-str">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>‚ñÉ‚ñÇ‚ñÅ
0 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
   7    8    9   10   11   12   13
           Log10(GDP)

<span class="out-str">‚Üí Distribution shifts right over time (economies growing)</span>
<span class="out-str">‚Üí Spread increases: inequality between countries grows</span>
<span class="out-str">‚Üí 2020s shows bimodal hints: emerging vs developed</span></div>
        </div>

        <div class="output-simulation" data-output="viz-1" data-lang="stata">
          <div class="output-header">
            <span>Stata Output (Graphics Window)</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body"><span class="out-str">. histogram log_gdp, kdensity frequency ...</span>

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  <span class="out-blue">Distribution of GDP (log scale)</span>                   ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ Frequency                     <span class="out-str">‚îÄ kdensity</span>           ‚îÇ
‚îÇ     ‚îÇ       <span class="out-yellow">‚ñÑ‚ñÑ‚ñÑ</span>                                    ‚îÇ
‚îÇ 800 ‚îÇ      <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà</span>‚ï≤                                  ‚îÇ
‚îÇ     ‚îÇ     <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>‚ï≤                                ‚îÇ
‚îÇ 600 ‚îÇ    <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>‚îÄ<span class="out-str">‚ï≤</span>                              ‚îÇ
‚îÇ     ‚îÇ   <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span> <span class="out-str">‚ï≤</span>                             ‚îÇ
‚îÇ 400 ‚îÇ  <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>  <span class="out-str">‚ï≤</span>                            ‚îÇ
‚îÇ     ‚îÇ <span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>   <span class="out-str">‚ï≤‚ñÉ‚ñÇ‚ñÅ</span>                      ‚îÇ
‚îÇ 200 ‚îÇ<span class="out-yellow">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñÑ‚ñÉ‚ñÇ</span>   ‚ñÅ‚ñÅ                     ‚îÇ
‚îÇ    0‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                    ‚îÇ
‚îÇ     7    8    9   10   11   12   13                 ‚îÇ
‚îÇ            Log10(GDP in USD)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

<span class="out-str">. graph box log_gdp, over(decade) ...</span>

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  <span class="out-blue">GDP Distribution by Decade</span>                        ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ Log10(GDP)                                          ‚îÇ
‚îÇ    13‚îÇ         ‚óã       ‚óã    ‚óã    <span class="out-yellow">‚óã</span>    ‚óã            ‚îÇ
‚îÇ      ‚îÇ      ‚î¨‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚î¨ ‚î¨‚îÄ‚îÄ‚î¥‚î¨ ‚î¨‚îÄ‚î¥‚îÄ‚î¨ <span class="out-yellow">‚î¨‚îÄ‚î¥‚îÄ‚î¨</span> ‚î¨‚îÄ‚îÄ‚î¥‚î¨         ‚îÇ
‚îÇ    11‚îÇ      ‚îÇ     ‚îÇ ‚îÇ   ‚îÇ ‚îÇ   ‚îÇ <span class="out-yellow">‚îÇ   ‚îÇ</span> ‚îÇ   ‚îÇ         ‚îÇ
‚îÇ      ‚îÇ      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚î§ ‚îú‚îÄ‚îÄ‚îÄ‚î§ <span class="out-yellow">‚îú‚îÄ‚îÄ‚îÄ‚î§</span> ‚îú‚îÄ‚îÄ‚îÄ‚î§         ‚îÇ
‚îÇ     9‚îÇ      ‚îî‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îò ‚îî‚îÄ‚î¨‚îÄ‚îò ‚îî‚îÄ‚î¨‚îÄ‚îò <span class="out-yellow">‚îî‚îÄ‚î¨‚îÄ‚îò</span> ‚îî‚îÄ‚î¨‚îÄ‚îò         ‚îÇ
‚îÇ      ‚îÇ         ‚îÇ      ‚îÇ     ‚îÇ    <span class="out-yellow">‚îÇ</span>     ‚îÇ           ‚îÇ
‚îÇ     7‚îÇ      ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ   ‚îÇ     ‚îÇ    <span class="out-yellow">‚îÇ</span>     ‚îÇ           ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ            ‚îÇ
‚îÇ        1970  1980  1990  2000  2020                 ‚îÇ
‚îÇ                    Decade                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

<span class="out-str">. twoway (line gdp_billions year if countrycode == "USA") ...</span>

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  <span class="out-blue">GDP Trends: Major Economies</span>                       ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ GDP (Billion USD)                                   ‚îÇ
‚îÇ 25000‚îÇ                         <span class="out-blue">‚ï±‚îÄ‚îÄUSA</span>              ‚îÇ
‚îÇ      ‚îÇ                      <span class="out-blue">‚ï±</span>                     ‚îÇ
‚îÇ 20000‚îÇ                   <span class="out-blue">‚ï±</span>     <span class="out-yellow">‚ï±‚îÄ‚îÄChina</span>           ‚îÇ
‚îÇ      ‚îÇ                <span class="out-blue">‚ï±</span>     <span class="out-yellow">‚ï±</span>                    ‚îÇ
‚îÇ 15000‚îÇ             <span class="out-blue">‚ï±</span>     <span class="out-yellow">‚ï±</span>                       ‚îÇ
‚îÇ      ‚îÇ          <span class="out-blue">‚ï±</span>    <span class="out-yellow">‚ï±</span>                          ‚îÇ
‚îÇ 10000‚îÇ       <span class="out-blue">‚ï±</span>   <span class="out-yellow">‚ï±</span>                               ‚îÇ
‚îÇ      ‚îÇ    <span class="out-blue">‚ï±</span> <span class="out-yellow">‚ï±</span>                                   ‚îÇ
‚îÇ  5000‚îÇ <span class="out-blue">‚ï±</span><span class="out-yellow">‚ï±</span>      <span class="out-green">‚îÄ‚îÄ‚îÄGermany</span>  <span class="out-str">‚îÄ‚îÄ‚îÄBrazil</span>  <span class="out-num">‚îÄ‚îÄ‚îÄIndia</span>   ‚îÇ
‚îÇ      ‚îÇ___<span class="out-green">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span><span class="out-str">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span><span class="out-num">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>             ‚îÇ
‚îÇ     0‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                ‚îÇ
‚îÇ      1960   1980   2000   2020                      ‚îÇ
‚îÇ                  Year                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

<span class="out-str">. twoway (kdensity log_gdp if decade == 1980) ...</span>

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  <span class="out-blue">GDP Distribution Shift Over Decades</span>               ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ Density            <span class="out-str">‚îÄ1980s</span>  <span class="out-blue">‚îÄ2000s</span>  <span class="out-yellow">‚îÄ2020s</span>        ‚îÇ
‚îÇ 0.4‚îÇ          <span class="out-str">‚ï±‚ï≤</span>                                   ‚îÇ
‚îÇ    ‚îÇ         <span class="out-str">‚ï±</span>  <span class="out-str">‚ï≤</span>   <span class="out-blue">‚ï±‚ï≤</span>                            ‚îÇ
‚îÇ 0.3‚îÇ        <span class="out-str">‚ï±</span>    <span class="out-str">‚ï≤</span> <span class="out-blue">‚ï±</span>  <span class="out-blue">‚ï≤</span>  <span class="out-yellow">‚ï±‚ï≤</span>                       ‚îÇ
‚îÇ    ‚îÇ       <span class="out-str">‚ï±</span>      <span class="out-str">‚ï≤</span><span class="out-blue">‚ï±</span>    <span class="out-blue">‚ï≤</span><span class="out-yellow">‚ï±</span>  <span class="out-yellow">‚ï≤</span>                     ‚îÇ
‚îÇ 0.2‚îÇ      <span class="out-str">‚ï±</span>        <span class="out-blue">‚îÇ</span>      <span class="out-yellow">‚îÇ</span>    <span class="out-yellow">‚ï≤</span>                   ‚îÇ
‚îÇ    ‚îÇ     <span class="out-str">‚ï±</span>         <span class="out-blue">‚îÇ</span>      <span class="out-yellow">‚îÇ</span>      <span class="out-yellow">‚ï≤</span>                 ‚îÇ
‚îÇ 0.1‚îÇ  <span class="out-str">__‚ï±</span>          <span class="out-blue">‚îÇ</span>      <span class="out-yellow">‚îÇ</span>        <span class="out-yellow">‚ï≤___</span>            ‚îÇ
‚îÇ   0‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ             ‚îÇ
‚îÇ     7    8    9   10   11   12   13                 ‚îÇ
‚îÇ              Log10(GDP)                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
        </div>

        <div class="output-simulation" data-output="viz-1" data-lang="r">
          <div class="output-header">
            <span>R Output (RStudio Plots Panel)</span>
            <button class="close-output">&times;</button>
          </div>
          <div class="output-body"><span class="out-str">&gt; (p1 + p2) / (p3 + p4)  # patchwork combines plots</span>

<span class="out-green">‚ïê‚ïê‚ïê 2x2 Panel: Exploratory Visualizations ‚ïê‚ïê‚ïê</span>

<span class="out-blue">‚îå‚îÄ Distribution (log scale) ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ Box Plot by Decade ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê</span>
‚îÇ Density                        ‚îÇ  ‚îÇ Log10(GDP)                 ‚îÇ
‚îÇ 0.4‚îÇ       <span class="out-blue">‚ñÑ‚ñÑ‚ñÑ</span>                  ‚îÇ  ‚îÇ    13‚îÇ  ‚óã    ‚óã   ‚óã  <span class="out-yellow">‚óã</span>  ‚óã   ‚îÇ
‚îÇ    ‚îÇ      <span class="out-blue">‚ñà‚ñà‚ñà‚ñà‚ñà</span>‚ï≤<span class="out-str">‚îÄdensity</span>       ‚îÇ  ‚îÇ      ‚îÇ ‚î¨‚î¥‚î¨  ‚î¨‚î¥‚î¨ ‚î¨‚î¥‚î¨ <span class="out-yellow">‚î¨‚î¥‚î¨</span> ‚î¨‚î¥‚î¨  ‚îÇ
‚îÇ 0.3‚îÇ     <span class="out-blue">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>‚ï≤               ‚îÇ  ‚îÇ    11‚îÇ ‚îÇ ‚îÇ  ‚îÇ ‚îÇ ‚îÇ ‚îÇ <span class="out-yellow">‚îÇ ‚îÇ</span> ‚îÇ ‚îÇ  ‚îÇ
‚îÇ    ‚îÇ    <span class="out-blue">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>‚ï≤              ‚îÇ  ‚îÇ      ‚îÇ ‚îú‚îÄ‚î§  ‚îú‚îÄ‚î§ ‚îú‚îÄ‚î§ <span class="out-yellow">‚îú‚îÄ‚î§</span> ‚îú‚îÄ‚î§  ‚îÇ
‚îÇ 0.2‚îÇ   <span class="out-blue">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>‚ï≤             ‚îÇ  ‚îÇ     9‚îÇ ‚îî‚î¨‚îò  ‚îî‚î¨‚îò ‚îî‚î¨‚îò <span class="out-yellow">‚îî‚î¨‚îò</span> ‚îî‚î¨‚îò  ‚îÇ
‚îÇ    ‚îÇ  <span class="out-blue">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>‚ï≤            ‚îÇ  ‚îÇ      ‚îÇ  ‚îÇ    ‚îÇ   ‚îÇ   <span class="out-yellow">‚îÇ</span>   ‚îÇ   ‚îÇ
‚îÇ 0.1‚îÇ <span class="out-blue">‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñÑ</span>‚ñÉ‚ñÇ‚ñÅ       ‚îÇ  ‚îÇ     7‚îÇ ‚îÄ‚î¥‚îÄ   ‚îÇ   ‚îÇ   <span class="out-yellow">‚îÇ</span>   ‚îÇ   ‚îÇ
‚îÇ   0‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ       ‚îÇ  ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ    7   8   9  10  11  12  13   ‚îÇ  ‚îÇ    1970 1980 1990 2000 2020‚îÇ
‚îÇ      Log10(GDP in USD)         ‚îÇ  ‚îÇ          Decade           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

<span class="out-blue">‚îå‚îÄ GDP Trends: Major Economies ‚îÄ‚îê  ‚îå‚îÄ All Countries Over Time ‚îÄ‚îÄ‚îê</span>
‚îÇ GDP (Billion USD)              ‚îÇ  ‚îÇ Log10(GDP)                 ‚îÇ
‚îÇ25000‚îÇ              <span class="out-blue">‚ï±‚îÄUSA</span>       ‚îÇ  ‚îÇ    13‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà</span>    ‚îÇ
‚îÇ     ‚îÇ            <span class="out-blue">‚ï±</span>            ‚îÇ  ‚îÇ      ‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà</span>    ‚îÇ
‚îÇ20000‚îÇ          <span class="out-blue">‚ï±</span>   <span class="out-yellow">‚ï±‚îÄCHN</span>      ‚îÇ  ‚îÇ    11‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà</span>    ‚îÇ
‚îÇ     ‚îÇ        <span class="out-blue">‚ï±</span>   <span class="out-yellow">‚ï±</span>             ‚îÇ  ‚îÇ      ‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>    ‚îÇ
‚îÇ15000‚îÇ      <span class="out-blue">‚ï±</span>  <span class="out-yellow">‚ï±</span>                ‚îÇ  ‚îÇ     9‚îÇ<span class="out-yellow">‚ñë‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>    ‚îÇ
‚îÇ     ‚îÇ    <span class="out-blue">‚ï±</span> <span class="out-yellow">‚ï±</span>                  ‚îÇ  ‚îÇ      ‚îÇ<span class="out-yellow">‚ñë‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>    ‚îÇ
‚îÇ10000‚îÇ  <span class="out-blue">‚ï±</span><span class="out-yellow">‚ï±</span>                    ‚îÇ  ‚îÇ     7‚îÇ<span class="out-yellow">‚ñí‚ñí‚ñí‚ñì‚ñì‚ñì‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà</span>    ‚îÇ
‚îÇ     ‚îÇ<span class="out-blue">‚ï±</span><span class="out-yellow">‚ï±</span>    <span class="out-green">‚îÄDEU</span>  <span class="out-str">‚îÄBRA</span> <span class="out-num">‚îÄIND</span>  ‚îÇ  ‚îÇ      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ ‚îÇ
‚îÇ 5000‚îÇ___<span class="out-green">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span><span class="out-str">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span><span class="out-num">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>      ‚îÇ  ‚îÇ    1970  1990  2010  2025 ‚îÇ
‚îÇ    0‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ    ‚îÇ  ‚îÇ  <span class="out-str">darker = more points</span>     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

<span class="out-str">&gt; df_viz %>% filter(Decade %in% c(1980, 2000, 2020)) %>% ...</span>

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  <span class="out-blue">GDP Distribution Shift Over Decades</span>               ‚îÇ
‚îÇ                                                     ‚îÇ
‚îÇ Density           Decade: <span class="out-str">‚îÄ1980</span>  <span class="out-blue">‚îÄ2000</span>  <span class="out-yellow">‚îÄ2020</span>     ‚îÇ
‚îÇ 0.4‚îÇ          <span class="out-str">‚ï±‚ï≤</span>                                   ‚îÇ
‚îÇ    ‚îÇ         <span class="out-str">‚ï±</span>  <span class="out-str">‚ï≤</span>   <span class="out-blue">‚ï±‚ï≤</span>                            ‚îÇ
‚îÇ 0.3‚îÇ        <span class="out-str">‚ï±</span>    <span class="out-str">‚ï≤</span> <span class="out-blue">‚ï±</span>  <span class="out-blue">‚ï≤</span>  <span class="out-yellow">‚ï±‚ï≤</span>                       ‚îÇ
‚îÇ    ‚îÇ       <span class="out-str">‚ï±</span>      <span class="out-str">‚ï≤</span><span class="out-blue">‚ï±</span>    <span class="out-blue">‚ï≤</span><span class="out-yellow">‚ï±</span>  <span class="out-yellow">‚ï≤</span>                     ‚îÇ
‚îÇ 0.2‚îÇ      <span class="out-str">‚ï±</span>              <span class="out-yellow">‚îÇ</span>    <span class="out-yellow">‚ï≤</span>                   ‚îÇ
‚îÇ    ‚îÇ     <span class="out-str">‚ï±</span>               <span class="out-yellow">‚îÇ</span>      <span class="out-yellow">‚ï≤</span>                 ‚îÇ
‚îÇ 0.1‚îÇ  <span class="out-str">__‚ï±</span>                <span class="out-yellow">‚îÇ</span>        <span class="out-yellow">‚ï≤___</span>            ‚îÇ
‚îÇ   0‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ             ‚îÇ
‚îÇ     7    8    9   10   11   12   13                 ‚îÇ
‚îÇ              Log10(GDP)                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

<span class="out-green">Plots rendered in RStudio Plots pane (Export ‚Üí Save as PDF)</span>

<span class="out-str">Key Insights:</span>
‚Üí Distribution shifts right over decades (global growth)
‚Üí Box plots reveal increasing spread (inequality)
‚Üí China's exponential rise visible in time series
‚Üí Scatter plot shows upward trend with high variance</div>
        </div>

        <!-- Complete First Analysis Script -->
        <h2>Complete "First Analysis" Script</h2>
        <p>Save this script and run it on <strong>every new dataset</strong> before any analysis:</p>

        <details>
          <summary style="cursor: pointer; font-weight: 600; color: #2563eb; padding: 1rem; background: #f0f9ff; border-radius: 8px;">Click to expand complete Python script</summary>
          <div class="code-tabs" style="margin-top: 1rem;">
            <div class="tab-content active" data-lang="python" style="display: block;">
<pre><code><span class="code-comment"># ============================================</span>
<span class="code-comment"># FIRST ANALYSIS SCRIPT - Run on every new dataset!</span>
<span class="code-comment"># ============================================</span>
<span class="code-tooltip" data-tip="IMPORT PANDAS: Loads the pandas library for data manipulation. 'as pd' creates a short alias so you type pd.read_csv() instead of pandas.read_csv()."><span class="code-keyword">import</span> pandas <span class="code-keyword">as</span> pd</span>
<span class="code-tooltip" data-tip="IMPORT MATPLOTLIB: Loads Python's main visualization library. 'as plt' is the standard alias used by virtually all Python programmers."><span class="code-keyword">import</span> matplotlib.pyplot <span class="code-keyword">as</span> plt</span>

<span class="code-comment"># 1. LOAD DATA - Replace URL with your data source</span>
<span class="code-tooltip" data-tip="DATA SOURCE: Change this URL to point to your own data file. Can be a web URL like this, or a local file path like 'data/myfile.csv'.">url</span> = <span class="code-string">"https://raw.githubusercontent.com/datasets/gdp/master/data/gdp.csv"</span>
<span class="code-tooltip" data-tip="LOAD DATA: pd.read_csv() reads the CSV file into a DataFrame. This is your working copy - the original file is unchanged.">df</span> = <span class="code-tooltip" data-tip="PD.READ_CSV(): Reads comma-separated values into a DataFrame. Automatically detects headers and guesses data types. Works with URLs or local file paths.">pd.read_csv(url)</span>

<span class="code-tooltip" data-tip="PRINT SEPARATOR: '='*50 creates a string of 50 equals signs. Used to make output easier to read by creating visual sections."><span class="code-keyword">print</span>(<span class="code-string">"="</span>*<span class="code-number">50</span>)</span>
<span class="code-keyword">print</span>(<span class="code-string">"FIRST ANALYSIS REPORT"</span>)
<span class="code-keyword">print</span>(<span class="code-string">"="</span>*<span class="code-number">50</span>)

<span class="code-comment"># 2. STRUCTURE - Understand dimensions and types</span>
<span class="code-tooltip" data-tip="DIMENSIONS: len(df) = number of rows, len(df.columns) = number of columns. The :, in the f-string adds thousands separators for readability."><span class="code-keyword">print</span>(<span class="code-string">f"\nRows: {len(df):,} | Columns: {len(df.columns)}"</span>)</span>
<span class="code-tooltip" data-tip="DF.DTYPES: Shows the data type of each column. 'object' = text, 'int64' = whole numbers, 'float64' = decimals. Critical for identifying if numbers were loaded as text."><span class="code-keyword">print</span>(<span class="code-string">f"\nColumn types:\n{df.dtypes}"</span>)</span>

<span class="code-comment"># 3. MISSING VALUES - Critical for research quality</span>
<span class="code-keyword">print</span>(<span class="code-string">"\n--- MISSING VALUES ---"</span>)
<span class="code-tooltip" data-tip="MISSING PERCENTAGE: Calculates what percent of each column is missing. df.isnull().sum() counts missing values, dividing by len(df) gives proportion, *100 converts to percentage.">missing_pct</span> = (<span class="code-tooltip" data-tip="DF.ISNULL().SUM(): Counts missing values per column. isnull() marks each cell as True/False (missing or not), sum() counts the True values.">df.isnull().sum()</span> / len(df) * <span class="code-number">100</span>).round(<span class="code-number">1</span>)
<span class="code-tooltip" data-tip="FILTER MISSING: missing_pct[missing_pct > 0] shows only columns that HAVE missing values. No point showing columns with 0% missing - this focuses attention on problems."><span class="code-keyword">print</span>(missing_pct[missing_pct > <span class="code-number">0</span>])</span>

<span class="code-comment"># 4. SUMMARY STATISTICS - Understand distributions</span>
<span class="code-keyword">print</span>(<span class="code-string">"\n--- SUMMARY STATISTICS ---"</span>)
<span class="code-tooltip" data-tip="DF.DESCRIBE(): Shows count, mean, std, min, 25%, 50% (median), 75%, max for all numeric columns. Quick way to spot outliers (huge max vs mean) or data issues (negative values where impossible)."><span class="code-keyword">print</span>(df.describe())</span>

<span class="code-comment"># 5. HISTOGRAMS - Visual inspection of all numeric columns</span>
<span class="code-tooltip" data-tip="SELECT_DTYPES(): Selects only columns of specific types. include=['number'] keeps only numeric columns. Useful because you can't make histograms of text.">df.select_dtypes(include=[<span class="code-string">'number'</span>])</span><span class="code-tooltip" data-tip=".HIST(): Creates histograms for ALL numeric columns at once! figsize sets overall figure size, bins=30 controls bar count. Amazing for quickly visualizing your entire dataset.">.hist(figsize=(<span class="code-number">12</span>, <span class="code-number">6</span>), bins=<span class="code-number">30</span>)</span>
<span class="code-tooltip" data-tip="TIGHT_LAYOUT(): Automatically adjusts spacing so labels don't overlap. Always call this when you have multiple subplots.">plt.tight_layout()</span>
<span class="code-tooltip" data-tip="SAVEFIG(): Saves the figure as an image file. Supports PNG, PDF, SVG, etc. Great for including in reports or papers.">plt.savefig(<span class="code-string">'first_analysis_histograms.png'</span>)</span>
<span class="code-tooltip" data-tip="PLT.SHOW(): Displays the plot on screen. In scripts, this is necessary to see the visualization.">plt.show()</span>

<span class="code-keyword">print</span>(<span class="code-string">"\n"</span> + <span class="code-string">"="</span>*<span class="code-number">50</span>)
<span class="code-keyword">print</span>(<span class="code-string">"ANALYSIS COMPLETE"</span>)
<span class="code-keyword">print</span>(<span class="code-string">"="</span>*<span class="code-number">50</span>)</code></pre>
            </div>
          </div>
        </details>

        <div class="nav-footer">
          <a href="02c-web-scraping.html" class="nav-link prev">Web Scraping (02c)</a>
          <a href="04-data-cleaning.html" class="nav-link next">Module 4: Data Cleaning</a>
        </div>
      </div>
    </main>
  </div>

  <div id="chatbot-widget" class="chatbot-widget">
    <button id="chatbot-toggle" class="chatbot-toggle" aria-label="Open course assistant">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
    </button>
    <div id="chatbot-panel" class="chatbot-panel">
      <div class="chatbot-header">
        <h3>ProTools ER1 Assistant</h3>
        <button id="chatbot-close" class="chatbot-close">&times;</button>
      </div>
      <div id="chatbot-messages" class="chatbot-messages">
        <div class="chat-message assistant">
          <p>Hello! I can help with questions about data exploration, Python, Stata, R, or the course material.</p>
        </div>
      </div>
      <div class="chatbot-input-area">
        <textarea id="chatbot-input" placeholder="Ask a question..." rows="2"></textarea>
        <button id="chatbot-send">Send</button>
      </div>
    </div>
  </div>

  <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">Menu</button>
  <script src="../js/main.js"></script>
  <script src="../js/password-protection.js"></script>
  <script src="../js/chatbot.js"></script>

  <!-- Run button and output toggle script -->
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    // Handle Run button clicks
    document.querySelectorAll('.run-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const lang = this.dataset.lang;
        const codeBlock = this.closest('.code-tabs');
        const outputId = codeBlock.dataset.runnable;

        // Hide all outputs for this code block
        document.querySelectorAll(`.output-simulation[data-output="${outputId}"]`).forEach(out => {
          out.classList.remove('visible');
        });

        // Show the output for the selected language
        const output = document.querySelector(`.output-simulation[data-output="${outputId}"][data-lang="${lang}"]`);
        if (output) {
          output.classList.add('visible');
          // Scroll to output
          output.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
      });
    });

    // Handle close output buttons
    document.querySelectorAll('.close-output').forEach(btn => {
      btn.addEventListener('click', function() {
        this.closest('.output-simulation').classList.remove('visible');
      });
    });

    // Update Run button when language tab changes
    document.querySelectorAll('.code-tabs .tab-button').forEach(btn => {
      btn.addEventListener('click', function() {
        const codeBlock = this.closest('.code-tabs');
        const outputId = codeBlock.dataset.runnable;
        if (outputId) {
          // Hide all outputs when switching tabs
          document.querySelectorAll(`.output-simulation[data-output="${outputId}"]`).forEach(out => {
            out.classList.remove('visible');
          });
        }
      });
    });
  });
  </script>

  <!-- Smart Tooltip Positioning System -->
  <script>
  (function() {
    let tooltipEl = null;
    let currentTarget = null;
    let hideTimeout = null;

    function createTooltip() {
      if (tooltipEl) return tooltipEl;
      tooltipEl = document.createElement('div');
      tooltipEl.className = 'tooltip-popup';
      document.body.appendChild(tooltipEl);
      return tooltipEl;
    }

    function positionTooltip(target) {
      const tooltip = createTooltip();
      const tipText = target.getAttribute('data-tip');
      if (!tipText) return;

      tooltip.textContent = tipText;
      tooltip.className = 'tooltip-popup';

      const targetRect = target.getBoundingClientRect();
      let container = target.closest('pre') || target.closest('.tab-content') || target.closest('.code-tabs');
      let containerRect = container ? container.getBoundingClientRect() : {
        left: 0, right: window.innerWidth, top: 0, bottom: window.innerHeight
      };

      const viewportWidth = window.innerWidth;
      const viewportHeight = window.innerHeight;
      const padding = 10;

      tooltip.style.visibility = 'hidden';
      tooltip.style.display = 'block';
      tooltip.classList.add('visible');

      const tooltipRect = tooltip.getBoundingClientRect();
      const tooltipWidth = tooltipRect.width;
      const tooltipHeight = tooltipRect.height;

      let left = targetRect.left + (targetRect.width / 2) - (tooltipWidth / 2);
      let top = targetRect.top - tooltipHeight - 8;
      let arrowClass = 'arrow-bottom';

      if (top < padding) {
        top = targetRect.bottom + 8;
        arrowClass = 'arrow-top';
      }

      if (top + tooltipHeight > viewportHeight - padding) {
        top = targetRect.top - tooltipHeight - 8;
        arrowClass = 'arrow-bottom';
      }

      if (left < padding) {
        left = padding;
      }
      if (left + tooltipWidth > viewportWidth - padding) {
        left = viewportWidth - tooltipWidth - padding;
      }

      if (container) {
        const minLeft = Math.max(padding, containerRect.left);
        const maxRight = Math.min(viewportWidth - padding, containerRect.right);
        if (left < minLeft) left = minLeft;
        if (left + tooltipWidth > maxRight) left = maxRight - tooltipWidth;
      }

      tooltip.style.left = left + 'px';
      tooltip.style.top = top + 'px';
      tooltip.style.visibility = 'visible';
      tooltip.classList.add(arrowClass);
    }

    function showTooltip(target) {
      if (hideTimeout) { clearTimeout(hideTimeout); hideTimeout = null; }
      currentTarget = target;
      positionTooltip(target);
    }

    function hideTooltip() {
      hideTimeout = setTimeout(function() {
        if (tooltipEl) tooltipEl.classList.remove('visible');
        currentTarget = null;
      }, 100);
    }

    document.addEventListener('mouseenter', function(e) {
      if (e.target.classList && e.target.classList.contains('code-tooltip')) showTooltip(e.target);
    }, true);

    document.addEventListener('mouseleave', function(e) {
      if (e.target.classList && e.target.classList.contains('code-tooltip')) hideTooltip();
    }, true);

    document.addEventListener('scroll', function() {
      if (currentTarget && tooltipEl && tooltipEl.classList.contains('visible')) positionTooltip(currentTarget);
    }, true);

    window.addEventListener('resize', function() {
      if (currentTarget && tooltipEl && tooltipEl.classList.contains('visible')) positionTooltip(currentTarget);
    });
  })();
  </script>
</body>
</html>
