<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Module 6: Causal Inference | ProTools ER1</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,600;0,700;1,400&family=Fira+Code:wght@400;500&family=Source+Sans+Pro:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
  <style>
    .protected-content {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    .code-tooltip { position: relative; cursor: help; border-bottom: 1px dotted #888; }
    .code-tooltip::after { content: attr(data-tip); position: absolute; bottom: 100%; left: 50%; transform: translateX(-50%); background: #1f2937; color: white; padding: 0.5rem 0.75rem; border-radius: 6px; font-size: 0.75rem; white-space: normal; width: max-content; max-width: 300px; opacity: 0; pointer-events: none; transition: opacity 0.2s; z-index: 100; }
    .code-tooltip:hover::after { opacity: 1; }
  </style>
</head>
<body>
  <!-- Password Protection Overlay -->
  <div id="password-overlay" class="password-overlay">
    <div class="password-modal">
      <h2>ProTools ER1</h2>
      <p>Programming Tools for Empirical Research</p>
      <p style="font-size: 0.9rem; color: #666; margin-bottom: 1.5rem;">Please enter the course password to access the materials.</p>
      <input type="password" id="password-input" placeholder="Enter password" autocomplete="off">
      <button id="password-submit">Access Course</button>
      <p id="password-error" style="color: #e53e3e; font-size: 0.85rem; margin-top: 1rem; display: none;">Incorrect password. Please try again.</p>
    </div>
  </div>

  <div class="page-wrapper protected-content">
    <aside class="sidebar">
      <a href="../index.html" class="sidebar-logo">ProTools ER1</a>
      <span class="sidebar-subtitle">Programming Tools for Empirical Research</span>
      <nav>
          <ul>
          <li><a href="../index.html"><span class="welcome-icon">üè†</span> Welcome</a></li>
          <li>
            <a href="00-languages-platforms.html"><span class="module-number">0</span> Languages & Platforms</a>
            <ul class="sub-nav">
              <li><a href="00a-rstudio-guide.html">RStudio Guide</a></li>
              <li><a href="00b-stata-guide.html">Stata Guide</a></li>
              <li><a href="00c-vscode-guide.html">VS Code Guide</a></li>
              <li><a href="00d-notebooks-guide.html">Notebooks Guide</a></li>
            </ul>
          </li>
          <li><a href="01-getting-started.html"><span class="module-number">1</span> Getting Started</a></li>
          <li>
            <a href="02-data-harnessing.html"><span class="module-number">2</span> Data Harnessing</a>
            <ul class="sub-nav">
              <li><a href="02a-file-import.html">Importing from Files</a></li>
              <li><a href="02b-apis.html">Working with APIs</a></li>
              <li><a href="02c-web-scraping.html">Web Scraping</a></li>
            </ul>
          </li>
          <li><a href="03-data-exploration.html"><span class="module-number">3</span> Data Exploration</a></li>
          <li><a href="04-data-cleaning.html"><span class="module-number">4</span> Data Cleaning</a></li>
          <li><a href="05-data-analysis.html"><span class="module-number">5</span> Data Analysis</a></li>
          <li class="active"><a href="06-causal-inference.html"><span class="module-number">6</span> Causal Inference</a></li>
          <li><a href="07-estimation.html"><span class="module-number">7</span> Estimation Methods</a></li>
          <li><a href="08-replicability.html"><span class="module-number">8</span> Replicability</a></li>
          <li><a href="09-github.html"><span class="module-number">9</span> Git & GitHub</a></li>
          <li><a href="10-nlp-history.html"><span class="module-number">10</span> History of NLP</a></li>
          <li><a href="11-machine-learning.html"><span class="module-number">11</span> Machine Learning</a></li>
          <li><a href="12-llms.html"><span class="module-number">12</span> Large Language Models</a></li>
          <li><a href="../resources.html">Resources</a></li>
          <li><a href="contact.html">Contact &amp; Feedback</a></li>
          </ul>
        </nav>
    </aside>

    <main class="main-content">
      <div class="content">
        <div class="module-header">
          <h1>6 &nbsp;Causal Inference</h1>
          <div class="module-meta">
            <span>~8 hours</span>
            <span>Theory & Foundations</span>
            <span>Intermediate-Advanced</span>
          </div>
        </div>

        <div class="learning-objectives">
          <h3>Learning Objectives</h3>
          <ul>
            <li>Understand the fundamental problem of causal inference</li>
            <li>Master the potential outcomes framework (Rubin Causal Model)</li>
            <li>Learn to read and construct Directed Acyclic Graphs (DAGs)</li>
            <li>Identify sources of selection bias and confounding</li>
            <li>Understand when causal claims are justified</li>
          </ul>
        </div>

        <div class="toc">
          <h3>Table of Contents</h3>
          <ul>
            <li><a href="#why-causality">5.1 Why Causality Matters</a></li>
            <li><a href="#potential-outcomes">5.2 The Potential Outcomes Framework</a></li>
            <li><a href="#ate">5.3 Average Treatment Effects</a></li>
            <li><a href="#selection-bias">5.4 Selection Bias</a></li>
            <li><a href="#dags">5.5 Directed Acyclic Graphs (DAGs)</a></li>
            <li><a href="#identification">5.6 Identification Strategies</a></li>
          </ul>
        </div>

        <div class="info-box note" style="margin-bottom: 2rem;">
          <div class="info-box-title">Prerequisites</div>
          <p style="margin-bottom: 0;">
            This module builds on data manipulation skills from <a href="02-data-harnessing.html">Module 2</a> and visualization from <a href="04-data-analysis.html">Module 4</a>. You should also be comfortable running regressions, which are covered in <a href="06-estimation.html">Module 6</a>.
          </p>
        </div>

        <h2 id="why-causality">5.1 Why Causality Matters</h2>

        <p>
          Correlation is not causation‚Äîyou've heard this countless times. But why does this distinction matter, and when can we move from correlation to causation?
        </p>

        <p>
          Consider these questions that require causal answers:
        </p>
        <ul>
          <li>Does education increase earnings?</li>
          <li>Do minimum wage increases reduce employment?</li>
          <li>Does health insurance improve health outcomes?</li>
          <li>Does advertising increase sales?</li>
        </ul>

        <p>
          To answer these, we need to know what <em>would have happened</em> had things been different. This counterfactual reasoning is the heart of causal inference.
        </p>

        <div class="info-box note">
          <div class="info-box-title">The Credibility Revolution</div>
          <p>
            The 2021 Nobel Prize in Economics was awarded to David Card, Joshua Angrist, and Guido Imbens for their methodological contributions to causal inference. Their work established the "credibility revolution" in empirical economics‚Äîa shift toward research designs that can convincingly identify causal effects.
          </p>
          <p class="credit">See: Angrist & Pischke (2010), "The Credibility Revolution in Empirical Economics"</p>
        </div>

        <h2 id="potential-outcomes">5.2 The Potential Outcomes Framework</h2>

        <p>
          The <strong>potential outcomes framework</strong> (also called the Rubin Causal Model) provides a formal language for thinking about causality. For each unit <em>i</em>, we define:
        </p>

        <div class="equation">
          <span class="code-tooltip" data-tip="Y represents the outcome we care about (e.g., wages, health). The subscript i identifies individual people or units in our study.">Y<sub>i</sub></span>(<span class="code-tooltip" data-tip="The number 1 indicates the treated state - what happens when someone receives the treatment or policy.">1</span>) = <span class="code-tooltip" data-tip="The outcome we would observe if this person receives the treatment. For example, their wage if they got a college degree.">Potential outcome if treated</span><br>
          <span class="code-tooltip" data-tip="Y represents the outcome we care about. The subscript i identifies individual people or units.">Y<sub>i</sub></span>(<span class="code-tooltip" data-tip="The number 0 indicates the untreated or control state - what happens without the treatment.">0</span>) = <span class="code-tooltip" data-tip="The outcome we would observe if this person does NOT receive the treatment. For example, their wage without a college degree.">Potential outcome if not treated</span>
        </div>

        <p>
          The <strong>individual treatment effect</strong> for unit <em>i</em> is:
        </p>

        <div class="equation">
          <span class="code-tooltip" data-tip="Tau (t) is the treatment effect - the causal impact of the treatment for person i. It tells us exactly how much better (or worse) off they are because of the treatment.">t<sub>i</sub></span> = <span class="code-tooltip" data-tip="The outcome if person i is treated (e.g., their wage with a college degree).">Y<sub>i</sub>(1)</span> - <span class="code-tooltip" data-tip="The outcome if person i is NOT treated (e.g., their wage without a college degree). This is the counterfactual - what would have happened otherwise.">Y<sub>i</sub>(0)</span>
        </div>

        <h3>The Fundamental Problem of Causal Inference</h3>

        <p>
          The fundamental problem is that we can only observe <em>one</em> of the potential outcomes for each unit. If unit <em>i</em> is treated (<span class="code-tooltip" data-tip="D is the treatment indicator variable. D=1 means the person received the treatment; D=0 means they did not.">D<sub>i</sub> = 1</span>), we observe <span class="code-tooltip" data-tip="We can see their actual outcome with treatment - e.g., we observe their wage after getting a college degree.">Y<sub>i</sub>(1)</span> but not <span class="code-tooltip" data-tip="We cannot observe what their outcome would have been without treatment - the 'road not taken.' This missing information is why causal inference is hard.">Y<sub>i</sub>(0)</span>. The unobserved outcome is the <strong><span class="code-tooltip" data-tip="The counterfactual is the hypothetical outcome that would have occurred under the alternative treatment status. We never observe it directly - it must be estimated.">counterfactual</span></strong>.
        </p>

        <h2 id="ate">5.3 Average Treatment Effects</h2>

        <p>
          Since individual effects are unobservable, we focus on <strong>average treatment effects</strong>:
        </p>

        <div class="equation">
          <strong><span class="code-tooltip" data-tip="Average Treatment Effect - the average causal effect across the entire population. It tells us: on average, how much does the treatment change outcomes?">ATE</span></strong> = <span class="code-tooltip" data-tip="E[ ] means 'expected value' or 'average.' This is the average of individual treatment effects across everyone.">E[Y(1) - Y(0)]</span> = <span class="code-tooltip" data-tip="Average outcome if everyone were treated">E[Y(1)]</span> - <span class="code-tooltip" data-tip="Average outcome if no one were treated. The difference gives us the average causal effect.">E[Y(0)]</span>
        </div>

        <h2 id="selection-bias">5.4 Selection Bias</h2>

        <p>
          The naive comparison of treated vs. untreated units can be decomposed as:
        </p>

        <div class="equation">
          <span class="code-tooltip" data-tip="Average outcome among those who actually received the treatment. The | symbol means 'given that' or 'conditional on.'">E[Y | D = 1]</span> - <span class="code-tooltip" data-tip="Average outcome among those who did not receive treatment (the control group).">E[Y | D = 0]</span> = <span style="color: #38a169;" class="code-tooltip" data-tip="Average Treatment Effect on the Treated - the causal effect for those who actually got the treatment. This is what we want to estimate.">ATT</span> + <span style="color: #e53e3e;" class="code-tooltip" data-tip="Selection bias occurs when treated and untreated groups differ in ways that affect outcomes. For example, people who choose to go to college may already have higher earning potential.">Selection Bias</span>
        </div>

        <h2 id="dags">5.5 Directed Acyclic Graphs (DAGs)</h2>

        <p>
          <strong>Directed Acyclic Graphs</strong> (DAGs) are a visual tool for representing causal relationships. They help us identify confounders, mediators, and colliders.
        </p>

        <h2 id="identification">5.6 Identification Strategies</h2>

        <p>
          <strong>Identification</strong> refers to the conditions under which we can recover a causal effect from data. The key question: what assumptions are needed to interpret our estimate causally?
        </p>

        <table>
          <thead>
            <tr>
              <th>Method</th>
              <th>Key Assumption</th>
              <th>Best Use Case</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong><span class="code-tooltip" data-tip="Matching pairs treated units with similar untreated units based on observable characteristics. Like finding 'statistical twins' who only differ in whether they received treatment.">Matching</span></strong></td>
              <td><span class="code-tooltip" data-tip="Conditional Independence Assumption (CIA): after controlling for observable characteristics, treatment assignment is as good as random. Assumes no unmeasured confounders.">Selection on observables (CIA)</span></td>
              <td><span class="code-tooltip" data-tip="Works well when you have detailed data on characteristics that determine both treatment and outcomes (e.g., demographics, prior test scores, work history).">Rich covariate data</span></td>
            </tr>
            <tr>
              <td><strong><span class="code-tooltip" data-tip="DiD compares changes over time between a treated group and control group. It removes time-invariant differences between groups by looking at trends, not levels.">Difference-in-Differences</span></strong></td>
              <td><span class="code-tooltip" data-tip="Parallel trends: without treatment, both groups would have followed the same trajectory. This is often shown by demonstrating similar pre-treatment trends.">Parallel trends</span></td>
              <td><span class="code-tooltip" data-tip="Ideal when a policy affects some regions/groups but not others, and you can observe both before and after the policy change (e.g., minimum wage increase in one state).">Policy changes with comparison groups</span></td>
            </tr>
            <tr>
              <td><strong><span class="code-tooltip" data-tip="RDD exploits sharp cutoffs in treatment assignment. People just above and below a threshold are nearly identical, so differences in outcomes must be caused by the treatment.">Regression Discontinuity</span></strong></td>
              <td><span class="code-tooltip" data-tip="Continuity assumption: people just above and below the cutoff would have similar outcomes in the absence of treatment. No manipulation of the running variable.">Continuity at cutoff</span></td>
              <td><span class="code-tooltip" data-tip="Works when treatment is assigned based on crossing a threshold (e.g., scholarship if GPA > 3.5, program eligibility at age 65, winning an election).">Threshold-based treatments</span></td>
            </tr>
            <tr>
              <td><strong><span class="code-tooltip" data-tip="IV uses an external variable (instrument) that affects the outcome ONLY through its effect on treatment. It isolates exogenous variation in treatment.">Instrumental Variables</span></strong></td>
              <td><span class="code-tooltip" data-tip="Exclusion restriction: the instrument affects outcome only through treatment (not directly). Relevance: the instrument must actually predict treatment.">Exclusion restriction, relevance</span></td>
              <td><span class="code-tooltip" data-tip="Useful when you have a natural experiment or random assignment that affects treatment but not outcomes directly (e.g., draft lottery affecting military service, distance to college).">Exogenous variation in treatment</span></td>
            </tr>
          </tbody>
        </table>

        <div class="citation">
          <div class="citation-title">Essential Reading</div>
          <ul>
            <li><strong>Cunningham, S.</strong> (2021). <em>Causal Inference: The Mixtape</em>. Yale University Press. <a href="https://mixtape.scunning.com" target="_blank">Free online</a></li>
            <li><strong>Huntington-Klein, N.</strong> (2022). <em>The Effect</em>. Chapman & Hall. <a href="https://theeffectbook.net" target="_blank">Free online</a></li>
            <li><strong>Angrist, J. & Pischke, J.</strong> (2009). <em>Mostly Harmless Econometrics</em>. Princeton.</li>
            <li><strong>Angrist, J. & Pischke, J.</strong> (2015). <em>Mastering 'Metrics</em>. Princeton.</li>
          </ul>
        </div>

        <div class="nav-footer">
          <a href="05-data-analysis.html" class="nav-link prev">Module 5: Data Analysis</a>
          <a href="07-estimation.html" class="nav-link next">Module 7: Estimation</a>
        </div>
      </div>
    </main>
  </div>

  <!-- Chatbot Widget -->
  <div id="chatbot-widget" class="chatbot-widget">
    <button id="chatbot-toggle" class="chatbot-toggle" aria-label="Open course assistant">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
      </svg>
    </button>
    <div id="chatbot-panel" class="chatbot-panel">
      <div class="chatbot-header">
        <h3>ProTools ER1 Assistant</h3>
        <button id="chatbot-close" class="chatbot-close">&times;</button>
      </div>
      <div id="chatbot-messages" class="chatbot-messages">
        <div class="chat-message assistant">
          <p>Hello! I'm the ProTools ER1 course assistant. I can help you with questions about Python, Stata, R, causal inference methods, or any of the course material. How can I assist you today?</p>
        </div>
      </div>
      <div class="chatbot-input-area">
        <textarea id="chatbot-input" placeholder="Ask a question about the course..." rows="2"></textarea>
        <button id="chatbot-send">Send</button>
      </div>
    </div>
  </div>

  <button class="mobile-menu-toggle" aria-label="Toggle navigation menu">Menu</button>
  <script src="../js/main.js"></script>
  <script src="../js/password-protection.js"></script>
  <script src="../js/chatbot.js"></script>
</body>
</html>
